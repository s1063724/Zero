2025-02-02 12:57:33 [INF] Application is shutting down...
2025-02-02 12:57:44 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-02 12:57:44 [WRN] The WebRootPath was not found: C:\Users\user\ProductWebsite\wwwroot. Static files may be unavailable.
2025-02-02 12:57:44 [WRN] Overriding address(es) 'http://localhost:5000'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-02-02 12:57:44 [INF] Now listening on: https://127.0.0.1:56532
2025-02-02 12:57:44 [INF] Now listening on: http://localhost:5000
2025-02-02 12:57:44 [INF] Now listening on: https://localhost:7007
2025-02-02 12:57:44 [INF] Application started. Press Ctrl+C to shut down.
2025-02-02 12:57:44 [INF] Hosting environment: Development
2025-02-02 12:57:44 [INF] Content root path: C:\Users\user\ProductWebsite
2025-02-02 13:15:41 [INF] Request starting HTTP/2 OPTIONS https://localhost:7007/api/users/register - null null
2025-02-02 13:15:42 [INF] CORS policy execution successful.
2025-02-02 13:15:42 [INF] Request finished HTTP/2 OPTIONS https://localhost:7007/api/users/register - 204 null null 34.7505ms
2025-02-02 13:15:42 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/register - application/json 59
2025-02-02 13:15:42 [INF] CORS policy execution successful.
2025-02-02 13:15:42 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Endpoint UserManagementAPI.Controllers.UsersController.Register (ProductWebsite) contains CORS metadata, but a middleware was not found that supports CORS.
Configure your application startup by adding app.UseCors() in the application startup code. If there are calls to app.UseRouting() and app.UseEndpoints(...), the call to app.UseCors() must go between them.
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.ThrowMissingCorsMiddlewareException(Endpoint endpoint)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_8>d.MoveNext() in C:\Users\user\ProductWebsite\Program.cs:line 186
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-02-02 13:15:42 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/register - 500 null text/plain; charset=utf-8 144.0869ms
2025-02-02 13:17:51 [INF] Request starting HTTP/2 OPTIONS https://localhost:7007/api/users/register - null null
2025-02-02 13:17:51 [INF] CORS policy execution successful.
2025-02-02 13:17:51 [INF] Request finished HTTP/2 OPTIONS https://localhost:7007/api/users/register - 204 null null 8.078ms
2025-02-02 13:17:51 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/register - application/json 59
2025-02-02 13:17:51 [INF] CORS policy execution successful.
2025-02-02 13:17:51 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Endpoint UserManagementAPI.Controllers.UsersController.Register (ProductWebsite) contains CORS metadata, but a middleware was not found that supports CORS.
Configure your application startup by adding app.UseCors() in the application startup code. If there are calls to app.UseRouting() and app.UseEndpoints(...), the call to app.UseCors() must go between them.
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.ThrowMissingCorsMiddlewareException(Endpoint endpoint)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Session.SessionMiddleware.Invoke(HttpContext context)
   at Program.<>c.<<<Main>$>b__0_8>d.MoveNext() in C:\Users\user\ProductWebsite\Program.cs:line 186
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-02-02 13:17:51 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/register - 500 null text/plain; charset=utf-8 28.027ms
2025-02-02 13:20:01 [INF] Application is shutting down...
2025-02-02 13:20:11 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-02 13:20:11 [WRN] The WebRootPath was not found: C:\Users\user\ProductWebsite\wwwroot. Static files may be unavailable.
2025-02-02 13:20:11 [WRN] Overriding address(es) 'http://localhost:5000'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-02-02 13:20:11 [INF] Now listening on: https://127.0.0.1:57708
2025-02-02 13:20:11 [INF] Now listening on: http://localhost:5000
2025-02-02 13:20:11 [INF] Now listening on: https://localhost:7007
2025-02-02 13:20:11 [INF] Application started. Press Ctrl+C to shut down.
2025-02-02 13:20:11 [INF] Hosting environment: Development
2025-02-02 13:20:11 [INF] Content root path: C:\Users\user\ProductWebsite
2025-02-02 13:20:16 [INF] Request starting HTTP/2 OPTIONS https://localhost:7007/api/users/register - null null
2025-02-02 13:20:16 [INF] CORS policy execution successful.
2025-02-02 13:20:16 [INF] Request finished HTTP/2 OPTIONS https://localhost:7007/api/users/register - 204 null null 42.4062ms
2025-02-02 13:20:16 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/register - application/json 59
2025-02-02 13:20:16 [INF] CORS policy execution successful.
2025-02-02 13:20:16 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.Register (ProductWebsite)'
2025-02-02 13:20:16 [INF] Route matched with {action = "Register", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(RegisterDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 13:20:17 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-02-02 13:20:17 [INF] Executed action UserManagementAPI.Controllers.UsersController.Register (ProductWebsite) in 396.5786ms
2025-02-02 13:20:17 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.Register (ProductWebsite)'
2025-02-02 13:20:17 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/register - 400 null application/problem+json; charset=utf-8 511.3083ms
2025-02-02 13:25:45 [INF] Application is shutting down...
2025-02-02 13:25:51 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-02 13:25:51 [WRN] The WebRootPath was not found: C:\Users\user\ProductWebsite\wwwroot. Static files may be unavailable.
2025-02-02 13:25:51 [WRN] Overriding address(es) 'http://localhost:5000'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-02-02 13:25:51 [INF] Now listening on: https://127.0.0.1:58026
2025-02-02 13:25:51 [INF] Now listening on: http://localhost:5000
2025-02-02 13:25:51 [INF] Now listening on: https://localhost:7007
2025-02-02 13:25:51 [INF] Application started. Press Ctrl+C to shut down.
2025-02-02 13:25:51 [INF] Hosting environment: Development
2025-02-02 13:25:51 [INF] Content root path: C:\Users\user\ProductWebsite
2025-02-02 13:26:01 [INF] Request starting HTTP/2 OPTIONS https://localhost:7007/api/users/register - null null
2025-02-02 13:26:01 [INF] CORS policy execution successful.
2025-02-02 13:26:01 [INF] Request finished HTTP/2 OPTIONS https://localhost:7007/api/users/register - 204 null null 40.0301ms
2025-02-02 13:26:01 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/register - application/json 59
2025-02-02 13:26:01 [INF] CORS policy execution successful.
2025-02-02 13:26:01 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.Register (ProductWebsite)'
2025-02-02 13:26:01 [INF] Route matched with {action = "Register", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(RegisterDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 13:26:02 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-02-02 13:26:02 [INF] Executed action UserManagementAPI.Controllers.UsersController.Register (ProductWebsite) in 352.2789ms
2025-02-02 13:26:02 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.Register (ProductWebsite)'
2025-02-02 13:26:02 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/register - 400 null application/problem+json; charset=utf-8 452.0165ms
2025-02-02 13:27:56 [INF] Request starting HTTP/2 OPTIONS https://localhost:7007/api/users/register - null null
2025-02-02 13:27:56 [INF] CORS policy execution successful.
2025-02-02 13:27:56 [INF] Request finished HTTP/2 OPTIONS https://localhost:7007/api/users/register - 204 null null 12.9111ms
2025-02-02 13:27:56 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/register - application/json 64
2025-02-02 13:27:56 [INF] CORS policy execution successful.
2025-02-02 13:27:56 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.Register (ProductWebsite)'
2025-02-02 13:27:56 [INF] Route matched with {action = "Register", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(RegisterDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 13:27:56 [INF] 收到註冊請求: {"Username":"Ray","Email":"ray@gmail.com","Password":"Ads12989"}
2025-02-02 13:27:56 [INF] === 開始註冊流程 ===
2025-02-02 13:27:56 [INF] 接收到的註冊數據: {"Username":"Ray","Email":"ray@gmail.com","Password":"Ads12989"}
2025-02-02 13:27:57 [ERR] Failed executing DbCommand (54ms) [Parameters=[@__registerDto_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[Password], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__registerDto_Email_0
2025-02-02 13:27:57 [ERR] An exception occurred while iterating over the results of a query for context type 'UserManagementAPI.Data.AppDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): 無效的資料行名稱 'Password'。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:e70e8c3d-2eaa-4e87-bae9-3e6ac06207a9
Error Number:207,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): 無效的資料行名稱 'Password'。
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:e70e8c3d-2eaa-4e87-bae9-3e6ac06207a9
Error Number:207,State:1,Class:16
2025-02-02 13:27:57 [ERR] 註冊過程發生錯誤: 無效的資料行名稱 'Password'。
2025-02-02 13:27:57 [ERR] 錯誤詳情:    at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at UserManagementAPI.Controllers.UsersController.Register(RegisterDto registerDto) in C:\Users\user\ProductWebsite\Controllers\UsersController.cs:line 85
2025-02-02 13:27:57 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-02 13:27:57 [INF] Executed action UserManagementAPI.Controllers.UsersController.Register (ProductWebsite) in 1756.0423ms
2025-02-02 13:27:57 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.Register (ProductWebsite)'
2025-02-02 13:27:57 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/register - 500 null application/json; charset=utf-8 1802.0686ms
2025-02-02 13:57:34 [INF] Application is shutting down...
2025-02-02 19:08:33 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 19:08:33 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-02-02 19:08:33 [INF] Executed DbCommand (61ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-02-02 19:08:33 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-02-02 19:08:33 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 19:08:33 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-02-02 19:08:33 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-02-02 19:08:33 [INF] Applying migration '20250202110811_AddPasswordFieldToUsers'.
2025-02-02 19:08:33 [ERR] Failed executing DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [Username] nvarchar(100) NOT NULL,
    [Email] nvarchar(100) NOT NULL,
    [Password] nvarchar(100) NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2025-02-02 19:19:15 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 19:19:15 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-02-02 19:19:15 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-02-02 19:19:15 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-02-02 19:19:15 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 19:19:15 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-02-02 19:19:15 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-02-02 19:19:15 [INF] Applying migration '20250202111842_InitialCreate'.
2025-02-02 19:19:15 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [Username] nvarchar(100) NOT NULL,
    [Email] nvarchar(100) NOT NULL,
    [Password] nvarchar(100) NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2025-02-02 19:19:15 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250202111842_InitialCreate', N'9.0.1');
2025-02-02 19:19:15 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-02-02 19:20:17 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 19:20:17 [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 19:20:18 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 19:20:18 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-02-02 19:20:18 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-02-02 19:20:18 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-02-02 19:20:18 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 19:20:18 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-02-02 19:20:18 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-02-02 19:20:18 [INF] No migrations were applied. The database is already up to date.
2025-02-02 19:20:18 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-02-02 19:20:18 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-02 19:20:18 [WRN] The WebRootPath was not found: C:\Users\user\ProductWebsite\wwwroot. Static files may be unavailable.
2025-02-02 19:20:18 [WRN] Overriding address(es) 'http://localhost:5000'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-02-02 19:20:18 [INF] Now listening on: https://127.0.0.1:54487
2025-02-02 19:20:18 [INF] Now listening on: http://localhost:5000
2025-02-02 19:20:18 [INF] Now listening on: https://localhost:7007
2025-02-02 19:20:18 [INF] Application started. Press Ctrl+C to shut down.
2025-02-02 19:20:18 [INF] Hosting environment: Development
2025-02-02 19:20:18 [INF] Content root path: C:\Users\user\ProductWebsite
2025-02-02 19:22:35 [INF] Request starting HTTP/2 OPTIONS https://localhost:7007/api/users/register - null null
2025-02-02 19:22:35 [INF] CORS policy execution successful.
2025-02-02 19:22:35 [INF] Request finished HTTP/2 OPTIONS https://localhost:7007/api/users/register - 204 null null 41.6015ms
2025-02-02 19:22:35 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/register - application/json 64
2025-02-02 19:22:35 [INF] CORS policy execution successful.
2025-02-02 19:22:35 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.Register (ProductWebsite)'
2025-02-02 19:22:35 [INF] Route matched with {action = "Register", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(RegisterDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 19:22:35 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 19:22:35 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 19:22:35 [INF] 收到註冊請求: {"Username":"Ray","Email":"ray@gmail.com","Password":"Ads12989"}
2025-02-02 19:22:35 [INF] === 開始註冊流程 ===
2025-02-02 19:22:35 [INF] 接收到的註冊數據: {"Username":"Ray","Email":"ray@gmail.com","Password":"Ads12989"}
2025-02-02 19:22:36 [INF] Executed DbCommand (28ms) [Parameters=[@__registerDto_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[Password], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__registerDto_Email_0
2025-02-02 19:22:36 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 100), @p2='?' (Size = 100), @p3='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([CreatedAt], [Email], [Password], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-02-02 19:22:36 [INF] 用戶註冊成功: ray@gmail.com
2025-02-02 19:22:36 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-02 19:22:36 [INF] Executed action UserManagementAPI.Controllers.UsersController.Register (ProductWebsite) in 1106.1279ms
2025-02-02 19:22:36 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.Register (ProductWebsite)'
2025-02-02 19:22:36 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/register - 200 null application/json; charset=utf-8 1199.4085ms
2025-02-02 19:22:44 [INF] Request starting HTTP/2 OPTIONS https://localhost:7007/api/users/login - null null
2025-02-02 19:22:44 [INF] CORS policy execution successful.
2025-02-02 19:22:44 [INF] Request finished HTTP/2 OPTIONS https://localhost:7007/api/users/login - 204 null null 7.7279ms
2025-02-02 19:22:44 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/login - application/json 42
2025-02-02 19:22:44 [INF] CORS policy execution successful.
2025-02-02 19:22:44 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.Login (ProductWebsite)'
2025-02-02 19:22:44 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UserManagementAPI.Models.LoginResponseDto]] Login(UserManagementAPI.Models.LoginDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 19:22:44 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 19:22:44 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 19:22:44 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-02-02 19:22:44 [INF] Executed action UserManagementAPI.Controllers.UsersController.Login (ProductWebsite) in 167.481ms
2025-02-02 19:22:44 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.Login (ProductWebsite)'
2025-02-02 19:22:44 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/login - 400 null application/problem+json; charset=utf-8 198.6612ms
2025-02-02 19:23:20 [INF] Request starting HTTP/2 OPTIONS https://localhost:7007/api/users/login - null null
2025-02-02 19:23:20 [INF] CORS policy execution successful.
2025-02-02 19:23:20 [INF] Request finished HTTP/2 OPTIONS https://localhost:7007/api/users/login - 204 null null 8.087ms
2025-02-02 19:23:20 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/login - application/json 47
2025-02-02 19:23:21 [INF] CORS policy execution successful.
2025-02-02 19:23:21 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.Login (ProductWebsite)'
2025-02-02 19:23:21 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[UserManagementAPI.Models.LoginResponseDto]] Login(UserManagementAPI.Models.LoginDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 19:23:21 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 19:23:21 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 19:23:21 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-02-02 19:23:21 [INF] Executed action UserManagementAPI.Controllers.UsersController.Login (ProductWebsite) in 47.2623ms
2025-02-02 19:23:21 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.Login (ProductWebsite)'
2025-02-02 19:23:21 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/login - 400 null application/problem+json; charset=utf-8 70.9597ms
2025-02-02 19:25:31 [INF] Application is shutting down...
2025-02-02 19:25:36 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 19:25:36 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 19:25:36 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 19:25:36 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-02-02 19:25:36 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-02-02 19:25:36 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-02-02 19:25:36 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 19:25:36 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-02-02 19:25:36 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-02-02 19:25:36 [INF] No migrations were applied. The database is already up to date.
2025-02-02 19:25:36 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-02-02 19:25:37 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-02 19:25:37 [WRN] The WebRootPath was not found: C:\Users\user\ProductWebsite\wwwroot. Static files may be unavailable.
2025-02-02 19:25:37 [WRN] Overriding address(es) 'http://localhost:5000'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-02-02 19:25:37 [INF] Now listening on: https://127.0.0.1:54744
2025-02-02 19:25:37 [INF] Now listening on: http://localhost:5000
2025-02-02 19:25:37 [INF] Now listening on: https://localhost:7007
2025-02-02 19:25:37 [INF] Application started. Press Ctrl+C to shut down.
2025-02-02 19:25:37 [INF] Hosting environment: Development
2025-02-02 19:25:37 [INF] Content root path: C:\Users\user\ProductWebsite
2025-02-02 19:25:42 [INF] Request starting HTTP/2 OPTIONS https://localhost:7007/api/users/login - null null
2025-02-02 19:25:42 [INF] CORS policy execution successful.
2025-02-02 19:25:42 [INF] Request finished HTTP/2 OPTIONS https://localhost:7007/api/users/login - 204 null null 41.2779ms
2025-02-02 19:25:42 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/login - application/json 47
2025-02-02 19:25:42 [INF] CORS policy execution successful.
2025-02-02 19:25:42 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.Login (ProductWebsite)'
2025-02-02 19:25:42 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(UserManagementAPI.Models.LoginDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 19:25:42 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 19:25:42 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 19:25:42 [INF] 嘗試登入: ray@gmail.com
2025-02-02 19:25:43 [INF] Executed DbCommand (37ms) [Parameters=[@__loginDto_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[Password], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__loginDto_Email_0
2025-02-02 19:25:43 [INF] 用戶登入成功: ray@gmail.com
2025-02-02 19:25:43 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-02 19:25:43 [INF] Executed action UserManagementAPI.Controllers.UsersController.Login (ProductWebsite) in 967.1427ms
2025-02-02 19:25:43 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.Login (ProductWebsite)'
2025-02-02 19:25:43 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/login - 200 null application/json; charset=utf-8 1069.7267ms
2025-02-02 19:25:44 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/login - application/json 47
2025-02-02 19:25:44 [INF] CORS policy execution successful.
2025-02-02 19:25:44 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.Login (ProductWebsite)'
2025-02-02 19:25:44 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(UserManagementAPI.Models.LoginDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 19:25:44 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 19:25:44 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 19:25:44 [INF] 嘗試登入: ray@gmail.com
2025-02-02 19:25:44 [INF] Executed DbCommand (3ms) [Parameters=[@__loginDto_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[Password], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__loginDto_Email_0
2025-02-02 19:25:44 [INF] 用戶登入成功: ray@gmail.com
2025-02-02 19:25:44 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-02 19:25:44 [INF] Executed action UserManagementAPI.Controllers.UsersController.Login (ProductWebsite) in 127.6057ms
2025-02-02 19:25:44 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.Login (ProductWebsite)'
2025-02-02 19:25:44 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/login - 200 null application/json; charset=utf-8 149.3615ms
2025-02-02 19:25:53 [INF] Request starting HTTP/2 OPTIONS https://localhost:7007/api/users/login - null null
2025-02-02 19:25:53 [INF] CORS policy execution successful.
2025-02-02 19:25:53 [INF] Request finished HTTP/2 OPTIONS https://localhost:7007/api/users/login - 204 null null 9.2267ms
2025-02-02 19:25:53 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/login - application/json 47
2025-02-02 19:25:53 [INF] CORS policy execution successful.
2025-02-02 19:25:53 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.Login (ProductWebsite)'
2025-02-02 19:25:53 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(UserManagementAPI.Models.LoginDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 19:25:53 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 19:25:53 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 19:25:53 [INF] 嘗試登入: ray@gmail.com
2025-02-02 19:25:53 [INF] Executed DbCommand (2ms) [Parameters=[@__loginDto_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[Password], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__loginDto_Email_0
2025-02-02 19:25:53 [INF] 用戶登入成功: ray@gmail.com
2025-02-02 19:25:53 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-02 19:25:53 [INF] Executed action UserManagementAPI.Controllers.UsersController.Login (ProductWebsite) in 52.5994ms
2025-02-02 19:25:53 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.Login (ProductWebsite)'
2025-02-02 19:25:53 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/login - 200 null application/json; charset=utf-8 101.9077ms
2025-02-02 19:25:55 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/login - application/json 47
2025-02-02 19:25:55 [INF] CORS policy execution successful.
2025-02-02 19:25:55 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.Login (ProductWebsite)'
2025-02-02 19:25:55 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(UserManagementAPI.Models.LoginDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 19:25:55 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 19:25:55 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 19:25:55 [INF] 嘗試登入: ray@gmail.com
2025-02-02 19:25:55 [INF] Executed DbCommand (4ms) [Parameters=[@__loginDto_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[Password], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__loginDto_Email_0
2025-02-02 19:25:55 [INF] 用戶登入成功: ray@gmail.com
2025-02-02 19:25:55 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-02 19:25:55 [INF] Executed action UserManagementAPI.Controllers.UsersController.Login (ProductWebsite) in 52.259ms
2025-02-02 19:25:55 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.Login (ProductWebsite)'
2025-02-02 19:25:55 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/login - 200 null application/json; charset=utf-8 71.9906ms
2025-02-02 19:25:55 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/login - application/json 47
2025-02-02 19:25:55 [INF] CORS policy execution successful.
2025-02-02 19:25:55 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.Login (ProductWebsite)'
2025-02-02 19:25:55 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(UserManagementAPI.Models.LoginDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 19:25:55 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 19:25:55 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 19:25:55 [INF] 嘗試登入: ray@gmail.com
2025-02-02 19:25:55 [INF] Executed DbCommand (2ms) [Parameters=[@__loginDto_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[Password], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__loginDto_Email_0
2025-02-02 19:25:55 [INF] 用戶登入成功: ray@gmail.com
2025-02-02 19:25:55 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-02 19:25:55 [INF] Executed action UserManagementAPI.Controllers.UsersController.Login (ProductWebsite) in 49.3249ms
2025-02-02 19:25:55 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.Login (ProductWebsite)'
2025-02-02 19:25:55 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/login - 200 null application/json; charset=utf-8 65.694ms
2025-02-02 19:25:55 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/login - application/json 47
2025-02-02 19:25:55 [INF] CORS policy execution successful.
2025-02-02 19:25:55 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.Login (ProductWebsite)'
2025-02-02 19:25:55 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(UserManagementAPI.Models.LoginDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 19:25:55 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 19:25:55 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 19:25:55 [INF] 嘗試登入: ray@gmail.com
2025-02-02 19:25:56 [INF] Executed DbCommand (5ms) [Parameters=[@__loginDto_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[Password], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__loginDto_Email_0
2025-02-02 19:25:56 [INF] 用戶登入成功: ray@gmail.com
2025-02-02 19:25:56 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-02 19:25:56 [INF] Executed action UserManagementAPI.Controllers.UsersController.Login (ProductWebsite) in 54.576ms
2025-02-02 19:25:56 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.Login (ProductWebsite)'
2025-02-02 19:25:56 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/login - 200 null application/json; charset=utf-8 73.6472ms
2025-02-02 19:25:56 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/login - application/json 47
2025-02-02 19:25:56 [INF] CORS policy execution successful.
2025-02-02 19:25:56 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.Login (ProductWebsite)'
2025-02-02 19:25:56 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(UserManagementAPI.Models.LoginDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 19:25:56 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 19:25:56 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 19:25:56 [INF] 嘗試登入: ray@gmail.com
2025-02-02 19:25:56 [INF] Executed DbCommand (2ms) [Parameters=[@__loginDto_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[Password], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__loginDto_Email_0
2025-02-02 19:25:56 [INF] 用戶登入成功: ray@gmail.com
2025-02-02 19:25:56 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-02 19:25:56 [INF] Executed action UserManagementAPI.Controllers.UsersController.Login (ProductWebsite) in 51.5394ms
2025-02-02 19:25:56 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.Login (ProductWebsite)'
2025-02-02 19:25:56 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/login - 200 null application/json; charset=utf-8 67.9841ms
2025-02-02 19:25:56 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/login - application/json 47
2025-02-02 19:25:56 [INF] CORS policy execution successful.
2025-02-02 19:25:56 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.Login (ProductWebsite)'
2025-02-02 19:25:56 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(UserManagementAPI.Models.LoginDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 19:25:56 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 19:25:56 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 19:25:56 [INF] 嘗試登入: ray@gmail.com
2025-02-02 19:25:56 [INF] Executed DbCommand (2ms) [Parameters=[@__loginDto_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[Password], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__loginDto_Email_0
2025-02-02 19:25:56 [INF] 用戶登入成功: ray@gmail.com
2025-02-02 19:25:56 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-02 19:25:56 [INF] Executed action UserManagementAPI.Controllers.UsersController.Login (ProductWebsite) in 40.5708ms
2025-02-02 19:25:56 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.Login (ProductWebsite)'
2025-02-02 19:25:56 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/login - 200 null application/json; charset=utf-8 55.3755ms
2025-02-02 19:25:56 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/login - application/json 47
2025-02-02 19:25:56 [INF] CORS policy execution successful.
2025-02-02 19:25:56 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.Login (ProductWebsite)'
2025-02-02 19:25:56 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(UserManagementAPI.Models.LoginDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 19:25:56 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 19:25:56 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 19:25:56 [INF] 嘗試登入: ray@gmail.com
2025-02-02 19:25:56 [INF] Executed DbCommand (2ms) [Parameters=[@__loginDto_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[Password], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__loginDto_Email_0
2025-02-02 19:25:56 [INF] 用戶登入成功: ray@gmail.com
2025-02-02 19:25:56 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-02 19:25:56 [INF] Executed action UserManagementAPI.Controllers.UsersController.Login (ProductWebsite) in 49.5928ms
2025-02-02 19:25:56 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.Login (ProductWebsite)'
2025-02-02 19:25:56 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/login - 200 null application/json; charset=utf-8 65.8068ms
2025-02-02 19:25:56 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/login - application/json 47
2025-02-02 19:25:56 [INF] CORS policy execution successful.
2025-02-02 19:25:56 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.Login (ProductWebsite)'
2025-02-02 19:25:56 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(UserManagementAPI.Models.LoginDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 19:25:56 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 19:25:56 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 19:25:56 [INF] 嘗試登入: ray@gmail.com
2025-02-02 19:25:56 [INF] Executed DbCommand (2ms) [Parameters=[@__loginDto_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[Password], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__loginDto_Email_0
2025-02-02 19:25:56 [INF] 用戶登入成功: ray@gmail.com
2025-02-02 19:25:56 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-02 19:25:56 [INF] Executed action UserManagementAPI.Controllers.UsersController.Login (ProductWebsite) in 49.2634ms
2025-02-02 19:25:56 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.Login (ProductWebsite)'
2025-02-02 19:25:56 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/login - 200 null application/json; charset=utf-8 64.6897ms
2025-02-02 19:29:46 [INF] Request starting HTTP/2 OPTIONS https://localhost:7007/api/users/login - null null
2025-02-02 19:29:46 [INF] CORS policy execution successful.
2025-02-02 19:29:46 [INF] Request finished HTTP/2 OPTIONS https://localhost:7007/api/users/login - 204 null null 10.2787ms
2025-02-02 19:29:46 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/login - application/json 47
2025-02-02 19:29:46 [INF] CORS policy execution successful.
2025-02-02 19:29:46 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.Login (ProductWebsite)'
2025-02-02 19:29:46 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(UserManagementAPI.Models.LoginDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 19:29:46 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 19:29:47 [INF] Executed DbCommand (561ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 19:29:47 [INF] 嘗試登入: ray@gmail.com
2025-02-02 19:29:47 [INF] Executed DbCommand (4ms) [Parameters=[@__loginDto_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[Password], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__loginDto_Email_0
2025-02-02 19:29:47 [INF] 用戶登入成功: ray@gmail.com
2025-02-02 19:29:47 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-02 19:29:47 [INF] Executed action UserManagementAPI.Controllers.UsersController.Login (ProductWebsite) in 595.338ms
2025-02-02 19:29:47 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.Login (ProductWebsite)'
2025-02-02 19:29:47 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/login - 200 null application/json; charset=utf-8 640.388ms
2025-02-02 19:30:09 [INF] Request starting HTTP/2 OPTIONS https://localhost:7007/api/users/login - null null
2025-02-02 19:30:09 [INF] CORS policy execution successful.
2025-02-02 19:30:09 [INF] Request finished HTTP/2 OPTIONS https://localhost:7007/api/users/login - 204 null null 6.5769ms
2025-02-02 19:30:09 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/login - application/json 50
2025-02-02 19:30:09 [INF] CORS policy execution successful.
2025-02-02 19:30:09 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.Login (ProductWebsite)'
2025-02-02 19:30:09 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(UserManagementAPI.Models.LoginDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 19:30:09 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 19:30:09 [INF] Executed DbCommand (58ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 19:30:09 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-02-02 19:30:09 [INF] Executed action UserManagementAPI.Controllers.UsersController.Login (ProductWebsite) in 126.8622ms
2025-02-02 19:30:09 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.Login (ProductWebsite)'
2025-02-02 19:30:09 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/login - 400 null application/problem+json; charset=utf-8 142.9161ms
2025-02-02 19:31:23 [INF] Request starting HTTP/2 OPTIONS https://localhost:7007/api/users/login - null null
2025-02-02 19:31:23 [INF] CORS policy execution successful.
2025-02-02 19:31:23 [INF] Request finished HTTP/2 OPTIONS https://localhost:7007/api/users/login - 204 null null 12.6074ms
2025-02-02 19:31:23 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/login - application/json 50
2025-02-02 19:31:23 [INF] CORS policy execution successful.
2025-02-02 19:31:23 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.Login (ProductWebsite)'
2025-02-02 19:31:23 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(UserManagementAPI.Models.LoginDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 19:31:23 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 19:31:23 [INF] Executed DbCommand (121ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 19:31:23 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-02-02 19:31:23 [INF] Executed action UserManagementAPI.Controllers.UsersController.Login (ProductWebsite) in 137.497ms
2025-02-02 19:31:23 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.Login (ProductWebsite)'
2025-02-02 19:31:23 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/login - 400 null application/problem+json; charset=utf-8 157.8222ms
2025-02-02 19:31:52 [INF] Application is shutting down...
2025-02-02 19:31:58 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 19:31:58 [INF] Executed DbCommand (64ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 19:31:58 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 19:31:58 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-02-02 19:31:58 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-02-02 19:31:58 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-02-02 19:31:58 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 19:31:58 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-02-02 19:31:58 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-02-02 19:31:58 [INF] No migrations were applied. The database is already up to date.
2025-02-02 19:31:58 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-02-02 19:31:58 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-02 19:31:58 [WRN] The WebRootPath was not found: C:\Users\user\ProductWebsite\wwwroot. Static files may be unavailable.
2025-02-02 19:31:58 [WRN] Overriding address(es) 'http://localhost:5000'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-02-02 19:31:58 [INF] Now listening on: https://127.0.0.1:55199
2025-02-02 19:31:58 [INF] Now listening on: http://localhost:5000
2025-02-02 19:31:58 [INF] Now listening on: https://localhost:7007
2025-02-02 19:31:58 [INF] Application started. Press Ctrl+C to shut down.
2025-02-02 19:31:58 [INF] Hosting environment: Development
2025-02-02 19:31:58 [INF] Content root path: C:\Users\user\ProductWebsite
2025-02-02 19:32:16 [INF] Request starting HTTP/2 OPTIONS https://localhost:7007/api/users/login - null null
2025-02-02 19:32:16 [INF] CORS policy execution successful.
2025-02-02 19:32:16 [INF] Request finished HTTP/2 OPTIONS https://localhost:7007/api/users/login - 204 null null 40.7157ms
2025-02-02 19:32:16 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/login - application/json 51
2025-02-02 19:32:16 [INF] CORS policy execution successful.
2025-02-02 19:32:16 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.Login (ProductWebsite)'
2025-02-02 19:32:16 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(UserManagementAPI.Models.LoginDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 19:32:16 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 19:32:16 [INF] Executed DbCommand (62ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 19:32:16 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-02-02 19:32:16 [INF] Executed action UserManagementAPI.Controllers.UsersController.Login (ProductWebsite) in 286.6129ms
2025-02-02 19:32:16 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.Login (ProductWebsite)'
2025-02-02 19:32:16 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/login - 400 null application/problem+json; charset=utf-8 363.5431ms
2025-02-02 19:33:50 [INF] Request starting HTTP/2 OPTIONS https://localhost:7007/api/users/login - null null
2025-02-02 19:33:50 [INF] CORS policy execution successful.
2025-02-02 19:33:50 [INF] Request finished HTTP/2 OPTIONS https://localhost:7007/api/users/login - 204 null null 9.6619ms
2025-02-02 19:33:50 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/login - application/json 47
2025-02-02 19:33:50 [INF] CORS policy execution successful.
2025-02-02 19:33:50 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.Login (ProductWebsite)'
2025-02-02 19:33:50 [INF] Route matched with {action = "Login", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(UserManagementAPI.Models.LoginDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 19:33:50 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 19:33:50 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 19:33:50 [INF] === 開始登入流程 ===
2025-02-02 19:33:50 [INF] 接收到的登入數據: {"Email":"ray@gmail.com","Password":"Ads12989"}
2025-02-02 19:33:50 [INF] Executed DbCommand (24ms) [Parameters=[@__loginDto_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[Password], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__loginDto_Email_0
2025-02-02 19:33:50 [INF] 用戶登入成功: ray@gmail.com
2025-02-02 19:33:50 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType4`3[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], ProductWebsite, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-02-02 19:33:50 [INF] Executed action UserManagementAPI.Controllers.UsersController.Login (ProductWebsite) in 851.1801ms
2025-02-02 19:33:50 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.Login (ProductWebsite)'
2025-02-02 19:33:50 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/login - 200 null application/json; charset=utf-8 878.1073ms
2025-02-02 19:34:09 [INF] Request starting HTTP/2 GET https://localhost:7007/api/users/google-login - null null
2025-02-02 19:34:09 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.GoogleLogin (ProductWebsite)'
2025-02-02 19:34:09 [INF] Route matched with {action = "GoogleLogin", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GoogleLogin() on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 19:34:09 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 19:34:09 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 19:34:09 [INF] Executing ChallengeResult with authentication schemes (["Google"]).
2025-02-02 19:34:09 [INF] AuthenticationScheme: Google was challenged.
2025-02-02 19:34:09 [INF] Executed action UserManagementAPI.Controllers.UsersController.GoogleLogin (ProductWebsite) in 63.7227ms
2025-02-02 19:34:09 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.GoogleLogin (ProductWebsite)'
2025-02-02 19:34:09 [INF] Request finished HTTP/2 GET https://localhost:7007/api/users/google-login - 302 0 null 93.1246ms
2025-02-02 19:34:11 [INF] Request starting HTTP/2 GET https://localhost:7007/api/users/google-callback?state=CfDJ8KiRbv1EUNdKojt2PlA3I_oIsOrDJnxUdDa4rpc44aB0RrpbKQu8GokecQUxF9XthSg6okDL2Cp9AJy_jnym-M0lMQ7Jnx8h1u-OPRKhMc_cXUkXqHeX0XaEM3EtcV7g90jCuWwurQiTFxUzp_Kn4y75c3mXbAs4xfl78uF6GxF_qluW1Ao_NS58NlhqbKx-t2WtEIEd-S-ZaZIY2naDPLoc8rrlPLYnO_KlTVcJ-PSeuBVP2T8dXVUAyazIyKSIz1jahzYSczoZ7n7pZoFc5MLO6UWh_XDxlGZ1-ooyCKxoUooJX9jQeE9r8MvTEhrL9ru-vnLCDQ_pQonE219-MWEzCKnuMFNU2dvS4LqXF_Ma&code=4%2F0ASVgi3KhuCmtJ2ff17LH7CpD7ElMstSM3TIZUZm4cEHFPGLQCis4RXHGt9aENGb7Re9twA&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+openid&authuser=1&prompt=none - null null
2025-02-02 19:34:15 [INF] AuthenticationScheme: Cookies signed in.
2025-02-02 19:34:15 [INF] Request finished HTTP/2 GET https://localhost:7007/api/users/google-callback?state=CfDJ8KiRbv1EUNdKojt2PlA3I_oIsOrDJnxUdDa4rpc44aB0RrpbKQu8GokecQUxF9XthSg6okDL2Cp9AJy_jnym-M0lMQ7Jnx8h1u-OPRKhMc_cXUkXqHeX0XaEM3EtcV7g90jCuWwurQiTFxUzp_Kn4y75c3mXbAs4xfl78uF6GxF_qluW1Ao_NS58NlhqbKx-t2WtEIEd-S-ZaZIY2naDPLoc8rrlPLYnO_KlTVcJ-PSeuBVP2T8dXVUAyazIyKSIz1jahzYSczoZ7n7pZoFc5MLO6UWh_XDxlGZ1-ooyCKxoUooJX9jQeE9r8MvTEhrL9ru-vnLCDQ_pQonE219-MWEzCKnuMFNU2dvS4LqXF_Ma&code=4%2F0ASVgi3KhuCmtJ2ff17LH7CpD7ElMstSM3TIZUZm4cEHFPGLQCis4RXHGt9aENGb7Re9twA&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+openid&authuser=1&prompt=none - 302 0 null 3156.1025ms
2025-02-02 19:34:15 [INF] Request starting HTTP/2 GET https://localhost:7007/api/users/google-callback - null null
2025-02-02 19:34:15 [INF] Error from RemoteAuthentication: The oauth state was missing or invalid..
2025-02-02 19:34:15 [INF] Request finished HTTP/2 GET https://localhost:7007/api/users/google-callback - 302 0 null 17.3222ms
2025-02-02 19:36:03 [INF] Request starting HTTP/2 GET https://localhost:7007/api/users/google-login - null null
2025-02-02 19:36:03 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.GoogleLogin (ProductWebsite)'
2025-02-02 19:36:03 [INF] Route matched with {action = "GoogleLogin", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GoogleLogin() on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 19:36:03 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 19:36:03 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 19:36:03 [INF] Executing ChallengeResult with authentication schemes (["Google"]).
2025-02-02 19:36:03 [INF] AuthenticationScheme: Google was challenged.
2025-02-02 19:36:03 [INF] Executed action UserManagementAPI.Controllers.UsersController.GoogleLogin (ProductWebsite) in 48.6771ms
2025-02-02 19:36:03 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.GoogleLogin (ProductWebsite)'
2025-02-02 19:36:03 [INF] Request finished HTTP/2 GET https://localhost:7007/api/users/google-login - 302 0 null 66.2631ms
2025-02-02 19:36:05 [INF] Request starting HTTP/2 GET https://localhost:7007/api/users/google-callback?state=CfDJ8KiRbv1EUNdKojt2PlA3I_ppuvt27KagqUhSBklbiV6u20O4hbU-Rq8DXH07Ol9kMFZ934aEFCu4LBLrhrqMULLPKOJDqUpFnLAuOwN8txRhF0qibWySWmyxkKrZ9JzKjye9IALgyQEXY0cDaNS9LvqK9FVgzS5l02eMbxJ1KFeUAKNhMoA4M7oHSb6yiUc_kFHcoVYio_XinP4HxiFh1BWRM2iXGB5OlJw1MeJtaZmw8oNrKj6qkdvqG6mGZwnpKDmWSPligT1jbHKRhyawomUjobpidTxMr1ZvXuoaQKjQcjGCT0k4zunADpc1UClraNFVPjIn6AstRa8WW5bKGeBTwYsTx-tY4zlQaH35TaZP&code=4%2F0ASVgi3If01_Si1pM3j4iZJOismHCdi_wAr0v0FA8d72WYFysrsCdt7AXiNGjl8_Ms92rxA&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+openid&authuser=1&prompt=none - null null
2025-02-02 19:36:08 [INF] AuthenticationScheme: Cookies signed in.
2025-02-02 19:36:08 [INF] Request finished HTTP/2 GET https://localhost:7007/api/users/google-callback?state=CfDJ8KiRbv1EUNdKojt2PlA3I_ppuvt27KagqUhSBklbiV6u20O4hbU-Rq8DXH07Ol9kMFZ934aEFCu4LBLrhrqMULLPKOJDqUpFnLAuOwN8txRhF0qibWySWmyxkKrZ9JzKjye9IALgyQEXY0cDaNS9LvqK9FVgzS5l02eMbxJ1KFeUAKNhMoA4M7oHSb6yiUc_kFHcoVYio_XinP4HxiFh1BWRM2iXGB5OlJw1MeJtaZmw8oNrKj6qkdvqG6mGZwnpKDmWSPligT1jbHKRhyawomUjobpidTxMr1ZvXuoaQKjQcjGCT0k4zunADpc1UClraNFVPjIn6AstRa8WW5bKGeBTwYsTx-tY4zlQaH35TaZP&code=4%2F0ASVgi3If01_Si1pM3j4iZJOismHCdi_wAr0v0FA8d72WYFysrsCdt7AXiNGjl8_Ms92rxA&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+openid&authuser=1&prompt=none - 302 0 null 2503.0724ms
2025-02-02 19:36:08 [INF] Request starting HTTP/2 GET https://localhost:7007/api/users/google-callback - null null
2025-02-02 19:36:08 [INF] Error from RemoteAuthentication: The oauth state was missing or invalid..
2025-02-02 19:36:08 [INF] Request finished HTTP/2 GET https://localhost:7007/api/users/google-callback - 302 0 null 7.3374ms
2025-02-02 19:43:12 [INF] Request starting HTTP/2 OPTIONS https://localhost:7007/api/logs - null null
2025-02-02 19:43:12 [INF] Request starting HTTP/2 OPTIONS https://localhost:7007/api/logs - null null
2025-02-02 19:43:12 [INF] CORS policy execution successful.
2025-02-02 19:43:12 [INF] CORS policy execution successful.
2025-02-02 19:43:12 [INF] Request finished HTTP/2 OPTIONS https://localhost:7007/api/logs - 204 null null 12.3864ms
2025-02-02 19:43:12 [INF] Request finished HTTP/2 OPTIONS https://localhost:7007/api/logs - 204 null null 14.1055ms
2025-02-02 19:43:12 [INF] Request starting HTTP/2 POST https://localhost:7007/api/logs - application/json 9181
2025-02-02 19:43:12 [INF] Request starting HTTP/2 POST https://localhost:7007/api/logs - application/json 328
2025-02-02 19:43:12 [INF] CORS policy execution successful.
2025-02-02 19:43:12 [INF] CORS policy execution successful.
2025-02-02 19:43:12 [INF] Request finished HTTP/2 POST https://localhost:7007/api/logs - 404 0 null 18.8234ms
2025-02-02 19:43:12 [INF] Request finished HTTP/2 POST https://localhost:7007/api/logs - 404 0 null 18.0841ms
2025-02-02 19:43:12 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7007/api/logs, Response status code: 404
2025-02-02 19:43:12 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7007/api/logs, Response status code: 404
2025-02-02 19:43:14 [INF] Request starting HTTP/2 POST https://localhost:7007/api/logs - application/json 9181
2025-02-02 19:43:14 [INF] Request starting HTTP/2 POST https://localhost:7007/api/logs - application/json 328
2025-02-02 19:43:14 [INF] CORS policy execution successful.
2025-02-02 19:43:14 [INF] CORS policy execution successful.
2025-02-02 19:43:14 [INF] Request finished HTTP/2 POST https://localhost:7007/api/logs - 404 0 null 7.9231ms
2025-02-02 19:43:14 [INF] Request finished HTTP/2 POST https://localhost:7007/api/logs - 404 0 null 5.8557ms
2025-02-02 19:43:14 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7007/api/logs, Response status code: 404
2025-02-02 19:43:14 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7007/api/logs, Response status code: 404
2025-02-02 22:42:36 [INF] Request starting HTTP/2 OPTIONS https://localhost:7007/api/users/forgot-password - null null
2025-02-02 22:42:36 [INF] CORS policy execution successful.
2025-02-02 22:42:36 [INF] Request finished HTTP/2 OPTIONS https://localhost:7007/api/users/forgot-password - 204 null null 16.3756ms
2025-02-02 22:42:36 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/forgot-password - application/json 31
2025-02-02 22:42:36 [INF] CORS policy execution successful.
2025-02-02 22:42:36 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/forgot-password - 404 0 null 13.5212ms
2025-02-02 22:42:36 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: POST https://localhost:7007/api/users/forgot-password, Response status code: 404
2025-02-02 22:42:55 [INF] Application is shutting down...
2025-02-02 22:43:14 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 22:43:14 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 22:43:25 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 22:43:25 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 22:43:25 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 22:43:25 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-02-02 22:43:25 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-02-02 22:43:25 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-02-02 22:43:25 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 22:43:25 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-02-02 22:43:25 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-02-02 22:43:25 [INF] Applying migration '20250202144315_AddPasswordResetFields'.
2025-02-02 22:43:25 [INF] Executed DbCommand (49ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] ADD [ResetPasswordToken] nvarchar(max) NOT NULL DEFAULT N'';
2025-02-02 22:43:25 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] ADD [ResetPasswordTokenExpires] datetime2 NULL;
2025-02-02 22:43:25 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250202144315_AddPasswordResetFields', N'9.0.1');
2025-02-02 22:43:25 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-02-02 22:43:34 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 22:43:34 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 22:43:34 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 22:43:34 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-02-02 22:43:34 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-02-02 22:43:35 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-02-02 22:43:35 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 22:43:35 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-02-02 22:43:35 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-02-02 22:43:35 [INF] No migrations were applied. The database is already up to date.
2025-02-02 22:43:35 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-02-02 22:43:35 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-02 22:43:35 [WRN] The WebRootPath was not found: C:\Users\user\ProductWebsite\wwwroot. Static files may be unavailable.
2025-02-02 22:43:35 [WRN] Overriding address(es) 'http://localhost:5000'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-02-02 22:43:35 [INF] Now listening on: https://127.0.0.1:62620
2025-02-02 22:43:35 [INF] Now listening on: http://localhost:5000
2025-02-02 22:43:35 [INF] Now listening on: https://localhost:7007
2025-02-02 22:43:35 [INF] Application started. Press Ctrl+C to shut down.
2025-02-02 22:43:35 [INF] Hosting environment: Development
2025-02-02 22:43:35 [INF] Content root path: C:\Users\user\ProductWebsite
2025-02-02 22:43:38 [INF] Request starting HTTP/2 OPTIONS https://localhost:7007/api/users/forgot-password - null null
2025-02-02 22:43:38 [INF] CORS policy execution successful.
2025-02-02 22:43:38 [INF] Request finished HTTP/2 OPTIONS https://localhost:7007/api/users/forgot-password - 204 null null 56.9785ms
2025-02-02 22:43:38 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/forgot-password - application/json 31
2025-02-02 22:43:38 [INF] CORS policy execution successful.
2025-02-02 22:43:38 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite)'
2025-02-02 22:43:38 [INF] Route matched with {action = "ForgotPassword", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(ForgotPasswordDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 22:43:38 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 22:43:38 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 22:43:38 [INF] 收到忘記密碼請求: ljps40301@gmail.com
2025-02-02 22:43:39 [INF] Executed DbCommand (27ms) [Parameters=[@__model_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[Password], [u].[ResetPasswordToken], [u].[ResetPasswordTokenExpires], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__model_Email_0
2025-02-02 22:43:39 [WRN] 找不到用戶: ljps40301@gmail.com
2025-02-02 22:43:39 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-02 22:43:39 [INF] Executed action UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite) in 871.0752ms
2025-02-02 22:43:39 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite)'
2025-02-02 22:43:39 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/forgot-password - 200 null application/json; charset=utf-8 951.2919ms
2025-02-02 22:45:56 [INF] Request starting HTTP/2 OPTIONS https://localhost:7007/api/users/register - null null
2025-02-02 22:45:56 [INF] CORS policy execution successful.
2025-02-02 22:45:56 [INF] Request finished HTTP/2 OPTIONS https://localhost:7007/api/users/register - 204 null null 62.1958ms
2025-02-02 22:45:56 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/register - application/json 72
2025-02-02 22:45:56 [INF] CORS policy execution successful.
2025-02-02 22:45:56 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.Register (ProductWebsite)'
2025-02-02 22:45:56 [INF] Route matched with {action = "Register", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(RegisterDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 22:45:56 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 22:45:56 [INF] Executed DbCommand (56ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 22:45:56 [INF] 收到註冊請求: {"Username":"rraad","Email":"ljps40301@gmail.com","Password":"ads12989"}
2025-02-02 22:45:56 [INF] === 開始註冊流程 ===
2025-02-02 22:45:56 [INF] 接收到的註冊數據: {"Username":"rraad","Email":"ljps40301@gmail.com","Password":"ads12989"}
2025-02-02 22:45:56 [INF] Executed DbCommand (6ms) [Parameters=[@__registerDto_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[Password], [u].[ResetPasswordToken], [u].[ResetPasswordTokenExpires], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__registerDto_Email_0
2025-02-02 22:45:57 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 100), @p2='?' (Size = 100), @p3='?' (Size = 4000), @p4='?' (DbType = DateTime2), @p5='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([CreatedAt], [Email], [Password], [ResetPasswordToken], [ResetPasswordTokenExpires], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-02-02 22:45:57 [ERR] An exception occurred in the database while saving changes for context type 'UserManagementAPI.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 無法插入 NULL 值到資料行 'ResetPasswordToken'，資料表 'ProductWebsite.dbo.Users'; 資料行不得有 Null。INSERT 失敗。
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4d044c15-7cfb-44b7-91fd-c5c3af913765
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): 無法插入 NULL 值到資料行 'ResetPasswordToken'，資料表 'ProductWebsite.dbo.Users'; 資料行不得有 Null。INSERT 失敗。
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:4d044c15-7cfb-44b7-91fd-c5c3af913765
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-02-02 22:45:57 [ERR] 註冊過程發生錯誤: An error occurred while saving the entity changes. See the inner exception for details.
2025-02-02 22:45:57 [ERR] 錯誤詳情:    at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at UserManagementAPI.Controllers.UsersController.Register(RegisterDto registerDto) in C:\Users\user\ProductWebsite\Controllers\UsersController.cs:line 104
2025-02-02 22:45:57 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType2`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-02 22:45:57 [INF] Executed action UserManagementAPI.Controllers.UsersController.Register (ProductWebsite) in 511.8933ms
2025-02-02 22:45:57 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.Register (ProductWebsite)'
2025-02-02 22:45:57 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/register - 500 null application/json; charset=utf-8 574.534ms
2025-02-02 22:48:40 [INF] Application is shutting down...
2025-02-02 22:48:59 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 22:48:59 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 22:49:09 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 22:49:09 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 22:49:09 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 22:49:09 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-02-02 22:49:09 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-02-02 22:49:09 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-02-02 22:49:09 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 22:49:09 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-02-02 22:49:10 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-02-02 22:49:10 [INF] Applying migration '20250202144900_UpdateUserResetPasswordFields'.
2025-02-02 22:49:10 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var sysname;
SELECT @var = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'ResetPasswordToken');
IF @var IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var + '];');
ALTER TABLE [Users] ALTER COLUMN [ResetPasswordToken] nvarchar(100) NULL;
2025-02-02 22:49:10 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250202144900_UpdateUserResetPasswordFields', N'9.0.1');
2025-02-02 22:49:10 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-02-02 22:49:17 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 22:49:17 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 22:49:17 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 22:49:17 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-02-02 22:49:17 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-02-02 22:49:17 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-02-02 22:49:17 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 22:49:17 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-02-02 22:49:17 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-02-02 22:49:17 [INF] No migrations were applied. The database is already up to date.
2025-02-02 22:49:17 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-02-02 22:49:18 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-02 22:49:18 [WRN] The WebRootPath was not found: C:\Users\user\ProductWebsite\wwwroot. Static files may be unavailable.
2025-02-02 22:49:18 [WRN] Overriding address(es) 'http://localhost:5000'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-02-02 22:49:18 [INF] Now listening on: https://127.0.0.1:62953
2025-02-02 22:49:18 [INF] Now listening on: http://localhost:5000
2025-02-02 22:49:18 [INF] Now listening on: https://localhost:7007
2025-02-02 22:49:18 [INF] Application started. Press Ctrl+C to shut down.
2025-02-02 22:49:18 [INF] Hosting environment: Development
2025-02-02 22:49:18 [INF] Content root path: C:\Users\user\ProductWebsite
2025-02-02 22:49:22 [INF] Request starting HTTP/2 OPTIONS https://localhost:7007/api/users/register - null null
2025-02-02 22:49:22 [INF] CORS policy execution successful.
2025-02-02 22:49:22 [INF] Request finished HTTP/2 OPTIONS https://localhost:7007/api/users/register - 204 null null 51.5724ms
2025-02-02 22:49:22 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/register - application/json 72
2025-02-02 22:49:22 [INF] CORS policy execution successful.
2025-02-02 22:49:22 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.Register (ProductWebsite)'
2025-02-02 22:49:22 [INF] Route matched with {action = "Register", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(RegisterDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 22:49:22 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 22:49:23 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 22:49:23 [INF] 收到註冊請求: {"Username":"rraad","Email":"ljps40301@gmail.com","Password":"ads12989"}
2025-02-02 22:49:23 [INF] === 開始註冊流程 ===
2025-02-02 22:49:23 [INF] 接收到的註冊數據: {"Username":"rraad","Email":"ljps40301@gmail.com","Password":"ads12989"}
2025-02-02 22:49:23 [INF] Executed DbCommand (29ms) [Parameters=[@__registerDto_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[Password], [u].[ResetPasswordToken], [u].[ResetPasswordTokenExpires], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__registerDto_Email_0
2025-02-02 22:49:24 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (Size = 100), @p2='?' (Size = 100), @p3='?' (Size = 100), @p4='?' (DbType = DateTime2), @p5='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([CreatedAt], [Email], [Password], [ResetPasswordToken], [ResetPasswordTokenExpires], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-02-02 22:49:24 [INF] 用戶註冊成功: ljps40301@gmail.com
2025-02-02 22:49:24 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-02 22:49:24 [INF] Executed action UserManagementAPI.Controllers.UsersController.Register (ProductWebsite) in 1144.4815ms
2025-02-02 22:49:24 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.Register (ProductWebsite)'
2025-02-02 22:49:24 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/register - 200 null application/json; charset=utf-8 1236.2839ms
2025-02-02 22:49:33 [INF] Request starting HTTP/2 OPTIONS https://localhost:7007/api/users/forgot-password - null null
2025-02-02 22:49:33 [INF] CORS policy execution successful.
2025-02-02 22:49:33 [INF] Request finished HTTP/2 OPTIONS https://localhost:7007/api/users/forgot-password - 204 null null 8.0017ms
2025-02-02 22:49:33 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/forgot-password - application/json 31
2025-02-02 22:49:33 [INF] CORS policy execution successful.
2025-02-02 22:49:33 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite)'
2025-02-02 22:49:33 [INF] Route matched with {action = "ForgotPassword", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(ForgotPasswordDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 22:49:33 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 22:49:33 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 22:49:33 [INF] 收到忘記密碼請求: ljps40301@gmail.com
2025-02-02 22:49:33 [INF] Executed DbCommand (3ms) [Parameters=[@__model_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[Password], [u].[ResetPasswordToken], [u].[ResetPasswordTokenExpires], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__model_Email_0
2025-02-02 22:49:33 [INF] Executed DbCommand (12ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ResetPasswordToken] = @p0, [ResetPasswordTokenExpires] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-02-02 22:49:33 [INF] 重設密碼連結: https://localhost:8080/reset-password?token=843ac41a-4f2f-4e42-9f74-4aa68635c8a8
2025-02-02 22:49:33 [INF] 重設密碼郵件已發送: ljps40301@gmail.com
2025-02-02 22:49:33 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-02 22:49:33 [INF] Executed action UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite) in 259.9081ms
2025-02-02 22:49:33 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite)'
2025-02-02 22:49:33 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/forgot-password - 200 null application/json; charset=utf-8 297.7971ms
2025-02-02 22:53:53 [INF] Application is shutting down...
2025-02-02 23:03:28 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:03:28 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 23:03:28 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:03:28 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-02-02 23:03:28 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-02-02 23:03:28 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-02-02 23:03:28 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:03:28 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-02-02 23:03:28 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-02-02 23:03:28 [INF] No migrations were applied. The database is already up to date.
2025-02-02 23:03:28 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-02-02 23:03:29 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-02 23:03:29 [WRN] The WebRootPath was not found: C:\Users\user\ProductWebsite\wwwroot. Static files may be unavailable.
2025-02-02 23:03:29 [WRN] Overriding address(es) 'http://localhost:5000'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-02-02 23:03:29 [INF] Now listening on: https://127.0.0.1:63773
2025-02-02 23:03:29 [INF] Now listening on: http://localhost:5000
2025-02-02 23:03:29 [INF] Now listening on: https://localhost:7007
2025-02-02 23:03:29 [INF] Application started. Press Ctrl+C to shut down.
2025-02-02 23:03:29 [INF] Hosting environment: Development
2025-02-02 23:03:29 [INF] Content root path: C:\Users\user\ProductWebsite
2025-02-02 23:03:29 [INF] 正在監聽: https://127.0.0.1:63773
2025-02-02 23:03:29 [INF] 正在監聽: http://localhost:5000
2025-02-02 23:03:29 [INF] 正在監聽: https://localhost:7007
2025-02-02 23:03:41 [INF] Request starting HTTP/2 OPTIONS https://localhost:7007/api/users/forgot-password - null null
2025-02-02 23:03:41 [INF] CORS policy execution successful.
2025-02-02 23:03:41 [INF] Request finished HTTP/2 OPTIONS https://localhost:7007/api/users/forgot-password - 204 null null 35.9592ms
2025-02-02 23:03:41 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/forgot-password - application/json 31
2025-02-02 23:03:41 [INF] CORS policy execution successful.
2025-02-02 23:03:41 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite)'
2025-02-02 23:03:41 [INF] Route matched with {action = "ForgotPassword", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(ForgotPasswordDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 23:03:41 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:03:41 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 23:03:41 [INF] 收到忘記密碼請求: ljps40301@gmail.com
2025-02-02 23:03:42 [INF] Executed DbCommand (22ms) [Parameters=[@__model_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[Password], [u].[ResetPasswordToken], [u].[ResetPasswordTokenExpires], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__model_Email_0
2025-02-02 23:03:42 [INF] Executed DbCommand (4ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ResetPasswordToken] = @p0, [ResetPasswordTokenExpires] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-02-02 23:03:42 [INF] 重設密碼連結: https://localhost:8080/reset-password?token=9027e078-34d0-4c11-9fac-30974ef994bd
2025-02-02 23:03:42 [INF] 重設密碼郵件已發送: ljps40301@gmail.com
2025-02-02 23:03:42 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-02 23:03:42 [INF] Executed action UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite) in 897.1298ms
2025-02-02 23:03:42 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite)'
2025-02-02 23:03:42 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/forgot-password - 200 null application/json; charset=utf-8 980.5111ms
2025-02-02 23:05:20 [INF] Request starting HTTP/2 GET https://localhost:7007/api/users/google-login - null null
2025-02-02 23:05:20 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.GoogleLogin (ProductWebsite)'
2025-02-02 23:05:20 [INF] Route matched with {action = "GoogleLogin", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GoogleLogin() on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 23:05:20 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:05:20 [INF] Executed DbCommand (68ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 23:05:20 [INF] Executing ChallengeResult with authentication schemes (["Google"]).
2025-02-02 23:05:20 [INF] AuthenticationScheme: Google was challenged.
2025-02-02 23:05:20 [INF] Executed action UserManagementAPI.Controllers.UsersController.GoogleLogin (ProductWebsite) in 256.6076ms
2025-02-02 23:05:20 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.GoogleLogin (ProductWebsite)'
2025-02-02 23:05:20 [INF] Request finished HTTP/2 GET https://localhost:7007/api/users/google-login - 302 0 null 297.784ms
2025-02-02 23:05:23 [INF] Request starting HTTP/2 GET https://localhost:7007/api/users/google-callback?state=CfDJ8KiRbv1EUNdKojt2PlA3I_rEvxheHtzgFItGBjtt-fXJiWeYvns1mQ99cuQ_QPne3BMye4Fjqn45h4ajL1RKtQq18JlfXUws-0JXd4zDqsY-UBlh5Z4qY5y-4gxvtbeNurF0enKih0LitAQd8H1iOWvTonTJTZCzCEd7a1FoONUMBJDN5gjHEX9LWTp1wgGhTTxX0_Qdqs-CimBSL6nmZMKtEYLVoShFm_dQQW6CNeCivmLqr3vepYsj7h-pPJOVcX__CuuvPkPF7rD7YS-pvQttasRcMWLgzfuP6VeGxTLDIdIxUiZlWs6WONFVejFAXCtOW3Au1ZRoInkzbQFdmyFj1Hn5grs02gFrMW4Sanow&code=4%2F0ASVgi3L9Vyk6F6IVTmeA-2_EaQTeYh9kJYF-EApss2p-uw3XrBm5IGKiS_0uX99HG1Qnvg&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+openid&authuser=1&prompt=none - null null
2025-02-02 23:05:25 [ERR] 發送郵件失敗: An error occurred while attempting to establish an SSL or TLS connection.

When connecting to an SMTP service, port 587 is typically reserved for plain-text connections. If
you intended to connect to SMTP on the SSL port, try connecting to port 465 instead. Otherwise,
if you intended to use STARTTLS, make sure to use the following code:

client.Connect ("smtp.gmail.com", 587, SecureSocketOptions.StartTls);

2025-02-02 23:05:25 [ERR] An unhandled exception has occurred while executing the request.
MailKit.Security.SslHandshakeException: An error occurred while attempting to establish an SSL or TLS connection.

When connecting to an SMTP service, port 587 is typically reserved for plain-text connections. If
you intended to connect to SMTP on the SSL port, try connecting to port 465 instead. Otherwise,
if you intended to use STARTTLS, make sure to use the following code:

client.Connect ("smtp.gmail.com", 587, SecureSocketOptions.StartTls);

 ---> System.Security.Authentication.AuthenticationException: Cannot determine the frame size or a corrupted frame was received.
   at System.Net.Security.SslStream.GetFrameSize(ReadOnlySpan`1 buffer)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReceiveHandshakeFrameAsync[TIOAdapter](CancellationToken cancellationToken)
   at System.Net.Security.SslStream.ForceAuthenticationAsync[TIOAdapter](Boolean receiveFirst, Byte[] reAuthenticationData, CancellationToken cancellationToken)
   at MailKit.Net.Smtp.SmtpClient.SslHandshakeAsync(SslStream ssl, String host, CancellationToken cancellationToken)
   at MailKit.Net.Smtp.SmtpClient.ConnectAsync(String host, Int32 port, SecureSocketOptions options, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at MailKit.Net.Smtp.SmtpClient.ConnectAsync(String host, Int32 port, SecureSocketOptions options, CancellationToken cancellationToken)
   at EmailService.SendEmailAsync(String to, String subject, String body) in C:\Users\user\ProductWebsite\Services\EmailService.cs:line 33
   at Program.<>c.<<<Main>$>b__0_12>d.MoveNext() in C:\Users\user\ProductWebsite\Program.cs:line 132
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authentication.RemoteAuthenticationHandler`1.HandleRequestAsync()
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-02-02 23:05:25 [INF] Request finished HTTP/2 GET https://localhost:7007/api/users/google-callback?state=CfDJ8KiRbv1EUNdKojt2PlA3I_rEvxheHtzgFItGBjtt-fXJiWeYvns1mQ99cuQ_QPne3BMye4Fjqn45h4ajL1RKtQq18JlfXUws-0JXd4zDqsY-UBlh5Z4qY5y-4gxvtbeNurF0enKih0LitAQd8H1iOWvTonTJTZCzCEd7a1FoONUMBJDN5gjHEX9LWTp1wgGhTTxX0_Qdqs-CimBSL6nmZMKtEYLVoShFm_dQQW6CNeCivmLqr3vepYsj7h-pPJOVcX__CuuvPkPF7rD7YS-pvQttasRcMWLgzfuP6VeGxTLDIdIxUiZlWs6WONFVejFAXCtOW3Au1ZRoInkzbQFdmyFj1Hn5grs02gFrMW4Sanow&code=4%2F0ASVgi3L9Vyk6F6IVTmeA-2_EaQTeYh9kJYF-EApss2p-uw3XrBm5IGKiS_0uX99HG1Qnvg&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+openid&authuser=1&prompt=none - 500 null text/html; charset=utf-8 2076.6671ms
2025-02-02 23:06:57 [INF] Application is shutting down...
2025-02-02 23:07:02 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:07:02 [INF] Executed DbCommand (58ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 23:07:02 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:07:02 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-02-02 23:07:02 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-02-02 23:07:02 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-02-02 23:07:03 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:07:03 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-02-02 23:07:03 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-02-02 23:07:03 [INF] No migrations were applied. The database is already up to date.
2025-02-02 23:07:03 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-02-02 23:07:03 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-02 23:07:03 [WRN] The WebRootPath was not found: C:\Users\user\ProductWebsite\wwwroot. Static files may be unavailable.
2025-02-02 23:07:03 [WRN] Overriding address(es) 'http://localhost:5000'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-02-02 23:07:03 [INF] Now listening on: https://127.0.0.1:63980
2025-02-02 23:07:03 [INF] Now listening on: http://localhost:5000
2025-02-02 23:07:03 [INF] Now listening on: https://localhost:7007
2025-02-02 23:07:03 [INF] Application started. Press Ctrl+C to shut down.
2025-02-02 23:07:03 [INF] Hosting environment: Development
2025-02-02 23:07:03 [INF] Content root path: C:\Users\user\ProductWebsite
2025-02-02 23:07:03 [INF] 正在監聽: https://127.0.0.1:63980
2025-02-02 23:07:03 [INF] 正在監聽: http://localhost:5000
2025-02-02 23:07:03 [INF] 正在監聽: https://localhost:7007
2025-02-02 23:07:12 [INF] Request starting HTTP/2 GET https://localhost:7007/api/users/google-login - null null
2025-02-02 23:07:12 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.GoogleLogin (ProductWebsite)'
2025-02-02 23:07:12 [INF] Route matched with {action = "GoogleLogin", controller = "Users"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult GoogleLogin() on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 23:07:13 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:07:13 [INF] Executed DbCommand (88ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 23:07:13 [INF] Executing ChallengeResult with authentication schemes (["Google"]).
2025-02-02 23:07:13 [INF] AuthenticationScheme: Google was challenged.
2025-02-02 23:07:13 [INF] Executed action UserManagementAPI.Controllers.UsersController.GoogleLogin (ProductWebsite) in 200.8676ms
2025-02-02 23:07:13 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.GoogleLogin (ProductWebsite)'
2025-02-02 23:07:13 [INF] Request finished HTTP/2 GET https://localhost:7007/api/users/google-login - 302 0 null 298.3722ms
2025-02-02 23:07:15 [INF] Request starting HTTP/2 GET https://localhost:7007/api/users/google-callback?state=CfDJ8KiRbv1EUNdKojt2PlA3I_reecbp9-CGckxtEVisdU2XekKT33xZIZY5y_OC9vSo5DadbLErQtAOlQVRK9c1IN-moy0hKLp1j5tH9Q-2glwiPKO9cWbm7CnfCCLMmShuKP1VFhtjR76DQFW5NqZ64I2kKQRTKuI_HtJnu6AXF2Q6pMiqirDJ3mRhyupi-Fbdi2P3xKh4dVKqApRJiy07sMPMjWh9ZFbyKJaramAu8B0X6PKPjmWY5CLSon8Yy-fyMZ8X_onsK-qxg64UN7-ioNEJ1HHdRASbokSH_yTIrqX-SGAVD3hVkz3sByvE6OCqBENJe8J2HQbG_TMCVjD6ZEpeCh0GArp5j-joPLbQX_3X&code=4%2F0ASVgi3LrKrfSe8zzi_t8yf8LdsEmUPlrBDnyagLO08It6WHuYWvmU60kAkb5cf1hsA1zZA&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+openid&authuser=1&prompt=none - null null
2025-02-02 23:07:19 [INF] 郵件已發送至 ljps40301@gmail.com
2025-02-02 23:07:19 [INF] AuthenticationScheme: Cookies signed in.
2025-02-02 23:07:19 [INF] Request finished HTTP/2 GET https://localhost:7007/api/users/google-callback?state=CfDJ8KiRbv1EUNdKojt2PlA3I_reecbp9-CGckxtEVisdU2XekKT33xZIZY5y_OC9vSo5DadbLErQtAOlQVRK9c1IN-moy0hKLp1j5tH9Q-2glwiPKO9cWbm7CnfCCLMmShuKP1VFhtjR76DQFW5NqZ64I2kKQRTKuI_HtJnu6AXF2Q6pMiqirDJ3mRhyupi-Fbdi2P3xKh4dVKqApRJiy07sMPMjWh9ZFbyKJaramAu8B0X6PKPjmWY5CLSon8Yy-fyMZ8X_onsK-qxg64UN7-ioNEJ1HHdRASbokSH_yTIrqX-SGAVD3hVkz3sByvE6OCqBENJe8J2HQbG_TMCVjD6ZEpeCh0GArp5j-joPLbQX_3X&code=4%2F0ASVgi3LrKrfSe8zzi_t8yf8LdsEmUPlrBDnyagLO08It6WHuYWvmU60kAkb5cf1hsA1zZA&scope=email+profile+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile+openid&authuser=1&prompt=none - 302 0 null 3569.2128ms
2025-02-02 23:07:19 [INF] Request starting HTTP/2 GET https://localhost:7007/api/users/google-callback - null null
2025-02-02 23:07:19 [INF] Error from RemoteAuthentication: The oauth state was missing or invalid..
2025-02-02 23:07:19 [INF] Request finished HTTP/2 GET https://localhost:7007/api/users/google-callback - 302 0 null 9.8008ms
2025-02-02 23:07:36 [INF] Request starting HTTP/2 OPTIONS https://localhost:7007/api/users/forgot-password - null null
2025-02-02 23:07:36 [INF] CORS policy execution successful.
2025-02-02 23:07:36 [INF] Request finished HTTP/2 OPTIONS https://localhost:7007/api/users/forgot-password - 204 null null 7.4935ms
2025-02-02 23:07:36 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/forgot-password - application/json 31
2025-02-02 23:07:36 [INF] CORS policy execution successful.
2025-02-02 23:07:36 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite)'
2025-02-02 23:07:36 [INF] Route matched with {action = "ForgotPassword", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(ForgotPasswordDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 23:07:37 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:07:37 [INF] Executed DbCommand (67ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 23:07:37 [INF] 收到忘記密碼請求: ljps40301@gmail.com
2025-02-02 23:07:37 [INF] Executed DbCommand (22ms) [Parameters=[@__model_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[Password], [u].[ResetPasswordToken], [u].[ResetPasswordTokenExpires], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__model_Email_0
2025-02-02 23:07:37 [INF] Executed DbCommand (6ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ResetPasswordToken] = @p0, [ResetPasswordTokenExpires] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-02-02 23:07:37 [INF] 重設密碼連結: https://localhost:8080/reset-password?token=397a00fd-ec78-4f07-983a-87cf9e67e6b2
2025-02-02 23:07:37 [INF] 重設密碼郵件已發送: ljps40301@gmail.com
2025-02-02 23:07:37 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-02 23:07:37 [INF] Executed action UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite) in 970.1185ms
2025-02-02 23:07:37 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite)'
2025-02-02 23:07:37 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/forgot-password - 200 null application/json; charset=utf-8 1013.2511ms
2025-02-02 23:10:24 [INF] Application is shutting down...
2025-02-02 23:12:03 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:12:03 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 23:12:03 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:12:03 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-02-02 23:12:03 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-02-02 23:12:03 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-02-02 23:12:03 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:12:03 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-02-02 23:12:03 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-02-02 23:12:03 [INF] No migrations were applied. The database is already up to date.
2025-02-02 23:12:03 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-02-02 23:12:03 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-02 23:12:03 [WRN] The WebRootPath was not found: C:\Users\user\ProductWebsite\wwwroot. Static files may be unavailable.
2025-02-02 23:12:03 [WRN] Overriding address(es) 'http://localhost:5000'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-02-02 23:12:03 [INF] Now listening on: https://127.0.0.1:64290
2025-02-02 23:12:03 [INF] Now listening on: http://localhost:5000
2025-02-02 23:12:03 [INF] Now listening on: https://localhost:7007
2025-02-02 23:12:03 [INF] Application started. Press Ctrl+C to shut down.
2025-02-02 23:12:03 [INF] Hosting environment: Development
2025-02-02 23:12:03 [INF] Content root path: C:\Users\user\ProductWebsite
2025-02-02 23:12:03 [INF] 正在監聽: https://127.0.0.1:64290
2025-02-02 23:12:03 [INF] 正在監聽: http://localhost:5000
2025-02-02 23:12:03 [INF] 正在監聽: https://localhost:7007
2025-02-02 23:12:11 [INF] Request starting HTTP/2 OPTIONS https://localhost:7007/api/users/forgot-password - null null
2025-02-02 23:12:11 [INF] CORS policy execution successful.
2025-02-02 23:12:11 [INF] Request finished HTTP/2 OPTIONS https://localhost:7007/api/users/forgot-password - 204 null null 38.0585ms
2025-02-02 23:12:11 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/forgot-password - application/json 31
2025-02-02 23:12:11 [INF] CORS policy execution successful.
2025-02-02 23:12:11 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite)'
2025-02-02 23:12:11 [INF] Route matched with {action = "ForgotPassword", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(ForgotPasswordDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 23:12:11 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:12:11 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 23:12:11 [INF] 收到忘記密碼請求: ljps40301@gmail.com
2025-02-02 23:12:11 [INF] Executed DbCommand (26ms) [Parameters=[@__model_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[Password], [u].[ResetPasswordToken], [u].[ResetPasswordTokenExpires], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__model_Email_0
2025-02-02 23:12:12 [INF] Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ResetPasswordToken] = @p0, [ResetPasswordTokenExpires] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-02-02 23:12:12 [INF] 重設密碼連結: https://localhost:8080/reset-password?token=db4b333a-c823-4dae-b72c-303d16c40143
2025-02-02 23:12:14 [INF] 郵件已發送至 ljps40301@gmail.com
2025-02-02 23:12:14 [INF] 重設密碼郵件已發送: ljps40301@gmail.com
2025-02-02 23:12:14 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-02 23:12:14 [INF] Executed action UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite) in 3392.281ms
2025-02-02 23:12:14 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite)'
2025-02-02 23:12:14 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/forgot-password - 200 null application/json; charset=utf-8 3485.5114ms
2025-02-02 23:15:31 [INF] Application is shutting down...
2025-02-02 23:15:36 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:15:37 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 23:15:37 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:15:37 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-02-02 23:15:37 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-02-02 23:15:37 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-02-02 23:15:37 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:15:37 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-02-02 23:15:37 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-02-02 23:15:37 [INF] No migrations were applied. The database is already up to date.
2025-02-02 23:15:37 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-02-02 23:15:37 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-02 23:15:37 [WRN] The WebRootPath was not found: C:\Users\user\ProductWebsite\wwwroot. Static files may be unavailable.
2025-02-02 23:15:37 [WRN] Overriding address(es) 'http://localhost:5000'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-02-02 23:15:37 [INF] Now listening on: https://127.0.0.1:64495
2025-02-02 23:15:37 [INF] Now listening on: http://localhost:5000
2025-02-02 23:15:37 [INF] Now listening on: https://localhost:7007
2025-02-02 23:15:37 [INF] Application started. Press Ctrl+C to shut down.
2025-02-02 23:15:37 [INF] Hosting environment: Development
2025-02-02 23:15:37 [INF] Content root path: C:\Users\user\ProductWebsite
2025-02-02 23:15:37 [INF] 正在監聽: https://127.0.0.1:64495
2025-02-02 23:15:37 [INF] 正在監聽: http://localhost:5000
2025-02-02 23:15:37 [INF] 正在監聽: https://localhost:7007
2025-02-02 23:15:45 [INF] Request starting HTTP/2 OPTIONS https://localhost:7007/api/users/forgot-password - null null
2025-02-02 23:15:45 [INF] CORS policy execution successful.
2025-02-02 23:15:45 [INF] Request finished HTTP/2 OPTIONS https://localhost:7007/api/users/forgot-password - 204 null null 37.8004ms
2025-02-02 23:15:45 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/forgot-password - application/json 31
2025-02-02 23:15:45 [INF] CORS policy execution successful.
2025-02-02 23:15:45 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite)'
2025-02-02 23:15:45 [INF] Route matched with {action = "ForgotPassword", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(ForgotPasswordDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 23:15:45 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:15:45 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 23:15:45 [INF] 收到忘記密碼請求: ljps40301@gmail.com
2025-02-02 23:15:46 [INF] Executed DbCommand (21ms) [Parameters=[@__model_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[Password], [u].[ResetPasswordToken], [u].[ResetPasswordTokenExpires], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__model_Email_0
2025-02-02 23:15:46 [INF] Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ResetPasswordToken] = @p0, [ResetPasswordTokenExpires] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-02-02 23:15:46 [INF] 重設密碼連結: https://localhost:8080/reset-password?token=70a0fb3e-a3a0-40c7-97be-e9d41c18edbc
2025-02-02 23:15:46 [INF] 開始連接 SMTP 服務器: smtp.gmail.com:587
2025-02-02 23:15:46 [INF] 使用帳號: 1030598@gmail.com
2025-02-02 23:15:47 [INF] SMTP 連接成功，開始驗證
2025-02-02 23:15:47 [INF] SMTP 驗證成功，開始發送郵件
2025-02-02 23:15:49 [INF] 郵件發送成功，開始斷開連接
2025-02-02 23:15:49 [INF] 郵件已成功發送至 ljps40301@gmail.com
2025-02-02 23:15:49 [INF] 重設密碼郵件已發送: ljps40301@gmail.com
2025-02-02 23:15:49 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-02 23:15:49 [INF] Executed action UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite) in 4057.5695ms
2025-02-02 23:15:49 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite)'
2025-02-02 23:15:49 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/forgot-password - 200 null application/json; charset=utf-8 4138.5699ms
2025-02-02 23:17:30 [INF] Application is shutting down...
2025-02-02 23:17:35 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:17:35 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 23:17:35 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:17:35 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-02-02 23:17:35 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-02-02 23:17:35 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-02-02 23:17:35 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:17:35 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-02-02 23:17:36 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-02-02 23:17:36 [INF] No migrations were applied. The database is already up to date.
2025-02-02 23:17:36 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-02-02 23:17:36 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-02 23:17:36 [WRN] The WebRootPath was not found: C:\Users\user\ProductWebsite\wwwroot. Static files may be unavailable.
2025-02-02 23:17:36 [WRN] Overriding address(es) 'http://localhost:5000'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-02-02 23:17:36 [INF] Now listening on: https://127.0.0.1:64618
2025-02-02 23:17:36 [INF] Now listening on: http://localhost:5000
2025-02-02 23:17:36 [INF] Now listening on: https://localhost:7007
2025-02-02 23:17:36 [INF] Application started. Press Ctrl+C to shut down.
2025-02-02 23:17:36 [INF] Hosting environment: Development
2025-02-02 23:17:36 [INF] Content root path: C:\Users\user\ProductWebsite
2025-02-02 23:17:36 [INF] 正在監聽: https://127.0.0.1:64618
2025-02-02 23:17:36 [INF] 正在監聽: http://localhost:5000
2025-02-02 23:17:36 [INF] 正在監聽: https://localhost:7007
2025-02-02 23:17:44 [INF] Request starting HTTP/2 OPTIONS https://localhost:7007/api/users/forgot-password - null null
2025-02-02 23:17:44 [INF] CORS policy execution successful.
2025-02-02 23:17:44 [INF] Request finished HTTP/2 OPTIONS https://localhost:7007/api/users/forgot-password - 204 null null 33.3987ms
2025-02-02 23:17:44 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/forgot-password - application/json 31
2025-02-02 23:17:44 [INF] CORS policy execution successful.
2025-02-02 23:17:44 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite)'
2025-02-02 23:17:44 [INF] Route matched with {action = "ForgotPassword", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(ForgotPasswordDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 23:17:44 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:17:44 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 23:17:45 [INF] 收到忘記密碼請求: ljps40301@gmail.com
2025-02-02 23:17:45 [INF] Executed DbCommand (22ms) [Parameters=[@__model_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[Password], [u].[ResetPasswordToken], [u].[ResetPasswordTokenExpires], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__model_Email_0
2025-02-02 23:17:45 [INF] Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ResetPasswordToken] = @p0, [ResetPasswordTokenExpires] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-02-02 23:17:45 [INF] 重設密碼連結: https://localhost:8080/reset-password?token=8fad5171-4d53-4b22-aebd-b9cf08937d75
2025-02-02 23:17:45 [INF] 開始連接 SMTP 服務器: smtp.gmail.com:587
2025-02-02 23:17:45 [INF] 使用帳號: 1030598@gmail.com
2025-02-02 23:17:46 [INF] SMTP 連接成功，開始驗證
2025-02-02 23:17:47 [INF] SMTP 驗證成功，開始發送郵件
2025-02-02 23:17:48 [INF] 郵件發送成功，開始斷開連接
2025-02-02 23:17:48 [INF] 郵件已成功發送至 ljps40301@gmail.com
2025-02-02 23:17:48 [INF] 重設密碼郵件已發送: ljps40301@gmail.com
2025-02-02 23:17:48 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-02 23:17:48 [INF] Executed action UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite) in 3784.2628ms
2025-02-02 23:17:48 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite)'
2025-02-02 23:17:48 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/forgot-password - 200 null application/json; charset=utf-8 3862.2581ms
2025-02-02 23:24:08 [INF] Application is shutting down...
2025-02-02 23:24:15 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:24:15 [INF] Executed DbCommand (68ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 23:24:15 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:24:15 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-02-02 23:24:15 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-02-02 23:24:15 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-02-02 23:24:15 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:24:15 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-02-02 23:24:15 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-02-02 23:24:15 [INF] No migrations were applied. The database is already up to date.
2025-02-02 23:24:15 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-02-02 23:24:15 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-02 23:24:15 [WRN] The WebRootPath was not found: C:\Users\user\ProductWebsite\wwwroot. Static files may be unavailable.
2025-02-02 23:24:15 [WRN] Overriding address(es) 'http://localhost:5000'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-02-02 23:24:15 [INF] Now listening on: https://127.0.0.1:64925
2025-02-02 23:24:15 [INF] Now listening on: http://localhost:5000
2025-02-02 23:24:15 [INF] Now listening on: https://localhost:7007
2025-02-02 23:24:15 [INF] Application started. Press Ctrl+C to shut down.
2025-02-02 23:24:15 [INF] Hosting environment: Development
2025-02-02 23:24:15 [INF] Content root path: C:\Users\user\ProductWebsite
2025-02-02 23:24:15 [INF] 正在監聽: https://127.0.0.1:64925
2025-02-02 23:24:15 [INF] 正在監聽: http://localhost:5000
2025-02-02 23:24:15 [INF] 正在監聽: https://localhost:7007
2025-02-02 23:24:24 [INF] Request starting HTTP/2 OPTIONS https://localhost:7007/api/users/forgot-password - null null
2025-02-02 23:24:24 [INF] CORS policy execution successful.
2025-02-02 23:24:24 [INF] Request finished HTTP/2 OPTIONS https://localhost:7007/api/users/forgot-password - 204 null null 36.1368ms
2025-02-02 23:24:24 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/forgot-password - application/json 31
2025-02-02 23:24:24 [INF] CORS policy execution successful.
2025-02-02 23:24:24 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite)'
2025-02-02 23:24:24 [INF] Route matched with {action = "ForgotPassword", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(ForgotPasswordDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 23:24:24 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:24:24 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 23:24:24 [INF] 收到忘記密碼請求: ljps40301@gmail.com
2025-02-02 23:24:25 [INF] Executed DbCommand (21ms) [Parameters=[@__model_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[Password], [u].[ResetPasswordToken], [u].[ResetPasswordTokenExpires], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__model_Email_0
2025-02-02 23:24:25 [INF] Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ResetPasswordToken] = @p0, [ResetPasswordTokenExpires] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-02-02 23:24:25 [INF] 重設密碼連結: https://localhost:8080/reset-password?token=67beaee4-195c-48db-859d-6cc4ae067080
2025-02-02 23:24:25 [INF] 開始連接 SMTP 服務器: smtp.gmail.com:587
2025-02-02 23:24:27 [INF] 郵件已成功發送至 ljps40301@gmail.com
2025-02-02 23:24:27 [INF] 重設密碼郵件已發送: ljps40301@gmail.com
2025-02-02 23:24:27 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-02 23:24:28 [INF] Executed action UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite) in 3230.1485ms
2025-02-02 23:24:28 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite)'
2025-02-02 23:24:28 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/forgot-password - 200 null application/json; charset=utf-8 3315.5971ms
2025-02-02 23:26:27 [INF] Application is shutting down...
2025-02-02 23:26:32 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:26:32 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 23:26:33 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:26:33 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-02-02 23:26:33 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-02-02 23:26:33 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-02-02 23:26:33 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:26:33 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-02-02 23:26:33 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-02-02 23:26:33 [INF] No migrations were applied. The database is already up to date.
2025-02-02 23:26:33 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-02-02 23:26:33 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-02 23:26:33 [WRN] The WebRootPath was not found: C:\Users\user\ProductWebsite\wwwroot. Static files may be unavailable.
2025-02-02 23:26:33 [WRN] Overriding address(es) 'http://localhost:5000'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-02-02 23:26:33 [INF] Now listening on: https://127.0.0.1:65075
2025-02-02 23:26:33 [INF] Now listening on: http://localhost:5000
2025-02-02 23:26:33 [INF] Now listening on: https://localhost:7007
2025-02-02 23:26:33 [INF] Application started. Press Ctrl+C to shut down.
2025-02-02 23:26:33 [INF] Hosting environment: Development
2025-02-02 23:26:33 [INF] Content root path: C:\Users\user\ProductWebsite
2025-02-02 23:26:33 [INF] 正在監聽: https://127.0.0.1:65075
2025-02-02 23:26:33 [INF] 正在監聽: http://localhost:5000
2025-02-02 23:26:33 [INF] 正在監聽: https://localhost:7007
2025-02-02 23:26:58 [INF] Request starting HTTP/2 OPTIONS https://localhost:7007/api/users/forgot-password - null null
2025-02-02 23:26:58 [INF] CORS policy execution successful.
2025-02-02 23:26:58 [INF] Request finished HTTP/2 OPTIONS https://localhost:7007/api/users/forgot-password - 204 null null 33.5896ms
2025-02-02 23:26:58 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/forgot-password - application/json 31
2025-02-02 23:26:58 [INF] CORS policy execution successful.
2025-02-02 23:26:58 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite)'
2025-02-02 23:26:58 [INF] Route matched with {action = "ForgotPassword", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(ForgotPasswordDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 23:26:58 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:26:58 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 23:26:58 [INF] 收到忘記密碼請求: ljps40301@gmail.com
2025-02-02 23:26:59 [INF] Executed DbCommand (22ms) [Parameters=[@__model_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[Password], [u].[ResetPasswordToken], [u].[ResetPasswordTokenExpires], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__model_Email_0
2025-02-02 23:26:59 [INF] Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ResetPasswordToken] = @p0, [ResetPasswordTokenExpires] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-02-02 23:26:59 [INF] 重設密碼連結: https://localhost:8080/reset-password?token=982d9d86-1f55-49d4-a804-84283115022f
2025-02-02 23:27:02 [INF] 郵件已成功發送至 ljps40301@gmail.com
2025-02-02 23:27:02 [INF] 重設密碼郵件已發送: ljps40301@gmail.com
2025-02-02 23:27:02 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-02 23:27:02 [INF] Executed action UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite) in 3671.4882ms
2025-02-02 23:27:02 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite)'
2025-02-02 23:27:02 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/forgot-password - 200 null application/json; charset=utf-8 3750.0653ms
2025-02-02 23:29:40 [INF] Application is shutting down...
2025-02-02 23:29:46 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:29:46 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 23:29:46 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:29:46 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-02-02 23:29:46 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-02-02 23:29:46 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-02-02 23:29:46 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:29:46 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-02-02 23:29:47 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-02-02 23:29:47 [INF] No migrations were applied. The database is already up to date.
2025-02-02 23:29:47 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-02-02 23:29:47 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-02 23:29:47 [WRN] The WebRootPath was not found: C:\Users\user\ProductWebsite\wwwroot. Static files may be unavailable.
2025-02-02 23:29:47 [WRN] Overriding address(es) 'http://localhost:5000'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-02-02 23:29:47 [INF] Now listening on: https://127.0.0.1:65247
2025-02-02 23:29:47 [INF] Now listening on: http://localhost:5000
2025-02-02 23:29:47 [INF] Now listening on: https://localhost:7007
2025-02-02 23:29:47 [INF] Application started. Press Ctrl+C to shut down.
2025-02-02 23:29:47 [INF] Hosting environment: Development
2025-02-02 23:29:47 [INF] Content root path: C:\Users\user\ProductWebsite
2025-02-02 23:29:47 [INF] 正在監聽: https://127.0.0.1:65247
2025-02-02 23:29:47 [INF] 正在監聽: http://localhost:5000
2025-02-02 23:29:47 [INF] 正在監聽: https://localhost:7007
2025-02-02 23:30:07 [INF] Request starting HTTP/2 OPTIONS https://localhost:7007/api/users/forgot-password - null null
2025-02-02 23:30:07 [INF] CORS policy execution successful.
2025-02-02 23:30:07 [INF] Request finished HTTP/2 OPTIONS https://localhost:7007/api/users/forgot-password - 204 null null 34.1901ms
2025-02-02 23:30:07 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/forgot-password - application/json 31
2025-02-02 23:30:07 [INF] CORS policy execution successful.
2025-02-02 23:30:07 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite)'
2025-02-02 23:30:07 [INF] Route matched with {action = "ForgotPassword", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(ForgotPasswordDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 23:30:08 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:30:08 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 23:30:08 [INF] 收到忘記密碼請求: ljps40301@gmail.com
2025-02-02 23:30:08 [INF] Executed DbCommand (23ms) [Parameters=[@__model_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[Password], [u].[ResetPasswordToken], [u].[ResetPasswordTokenExpires], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__model_Email_0
2025-02-02 23:30:08 [INF] Executed DbCommand (6ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ResetPasswordToken] = @p0, [ResetPasswordTokenExpires] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-02-02 23:30:08 [INF] 重設密碼連結: https://localhost:8080/reset-password?token=e6ec0291-4f42-4aa8-bbfe-3a24b024c496
2025-02-02 23:30:11 [INF] 郵件已成功發送至 ljps40301@gmail.com
2025-02-02 23:30:11 [INF] 重設密碼郵件已發送: ljps40301@gmail.com
2025-02-02 23:30:11 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-02 23:30:11 [INF] Executed action UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite) in 3150.1424ms
2025-02-02 23:30:11 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite)'
2025-02-02 23:30:11 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/forgot-password - 200 null application/json; charset=utf-8 3239.4485ms
2025-02-02 23:35:15 [INF] Application is shutting down...
2025-02-02 23:35:22 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:35:22 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 23:35:22 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:35:22 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-02-02 23:35:22 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-02-02 23:35:22 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-02-02 23:35:22 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:35:22 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-02-02 23:35:22 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-02-02 23:35:22 [INF] No migrations were applied. The database is already up to date.
2025-02-02 23:35:22 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-02-02 23:35:22 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-02 23:35:22 [WRN] The WebRootPath was not found: C:\Users\user\ProductWebsite\wwwroot. Static files may be unavailable.
2025-02-02 23:35:22 [WRN] Overriding address(es) 'http://localhost:5000'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-02-02 23:35:23 [INF] Now listening on: https://127.0.0.1:49183
2025-02-02 23:35:23 [INF] Now listening on: http://localhost:5000
2025-02-02 23:35:23 [INF] Now listening on: https://localhost:7007
2025-02-02 23:35:23 [INF] Application started. Press Ctrl+C to shut down.
2025-02-02 23:35:23 [INF] Hosting environment: Development
2025-02-02 23:35:23 [INF] Content root path: C:\Users\user\ProductWebsite
2025-02-02 23:35:23 [INF] 正在監聽: https://127.0.0.1:49183
2025-02-02 23:35:23 [INF] 正在監聽: http://localhost:5000
2025-02-02 23:35:23 [INF] 正在監聽: https://localhost:7007
2025-02-02 23:35:24 [INF] Request starting HTTP/2 OPTIONS https://localhost:7007/api/users/forgot-password - null null
2025-02-02 23:35:24 [INF] CORS policy execution successful.
2025-02-02 23:35:24 [INF] Request finished HTTP/2 OPTIONS https://localhost:7007/api/users/forgot-password - 204 null null 33.4638ms
2025-02-02 23:35:24 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/forgot-password - application/json 31
2025-02-02 23:35:24 [INF] CORS policy execution successful.
2025-02-02 23:35:24 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite)'
2025-02-02 23:35:24 [INF] Route matched with {action = "ForgotPassword", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(ForgotPasswordDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 23:35:24 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:35:24 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 23:35:24 [INF] 收到忘記密碼請求: ljps40301@gmail.com
2025-02-02 23:35:25 [INF] Executed DbCommand (24ms) [Parameters=[@__model_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[Password], [u].[ResetPasswordToken], [u].[ResetPasswordTokenExpires], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__model_Email_0
2025-02-02 23:35:25 [INF] Executed DbCommand (6ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ResetPasswordToken] = @p0, [ResetPasswordTokenExpires] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-02-02 23:35:25 [INF] 重設密碼連結: https://localhost:8080/reset-password?token=c0bdf214-9f39-4529-94d6-5f9189d3ea52
2025-02-02 23:35:28 [INF] 郵件已成功發送至 ljps40301@gmail.com
2025-02-02 23:35:40 [INF] 重設密碼郵件已發送: ljps40301@gmail.com
2025-02-02 23:35:40 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-02 23:35:40 [INF] Executed action UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite) in 15640.774ms
2025-02-02 23:35:40 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite)'
2025-02-02 23:35:40 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/forgot-password - 200 null application/json; charset=utf-8 15723.271ms
2025-02-02 23:40:47 [INF] Application is shutting down...
2025-02-02 23:40:52 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:40:53 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 23:40:53 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:40:53 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-02-02 23:40:53 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-02-02 23:40:53 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-02-02 23:40:53 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:40:53 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-02-02 23:40:53 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-02-02 23:40:53 [INF] No migrations were applied. The database is already up to date.
2025-02-02 23:40:53 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-02-02 23:40:53 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-02 23:40:53 [WRN] The WebRootPath was not found: C:\Users\user\ProductWebsite\wwwroot. Static files may be unavailable.
2025-02-02 23:40:53 [WRN] Overriding address(es) 'http://localhost:5000'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-02-02 23:40:53 [INF] Now listening on: https://127.0.0.1:49523
2025-02-02 23:40:53 [INF] Now listening on: http://localhost:5000
2025-02-02 23:40:53 [INF] Now listening on: https://localhost:7007
2025-02-02 23:40:53 [INF] Application started. Press Ctrl+C to shut down.
2025-02-02 23:40:53 [INF] Hosting environment: Development
2025-02-02 23:40:53 [INF] Content root path: C:\Users\user\ProductWebsite
2025-02-02 23:40:53 [INF] 正在監聽: https://127.0.0.1:49523
2025-02-02 23:40:53 [INF] 正在監聽: http://localhost:5000
2025-02-02 23:40:53 [INF] 正在監聽: https://localhost:7007
2025-02-02 23:42:34 [INF] Application is shutting down...
2025-02-02 23:42:38 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:42:39 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 23:42:39 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:42:39 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-02-02 23:42:39 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-02-02 23:42:39 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-02-02 23:42:39 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:42:39 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-02-02 23:42:39 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-02-02 23:42:39 [INF] No migrations were applied. The database is already up to date.
2025-02-02 23:42:39 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-02-02 23:42:39 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-02 23:42:39 [WRN] The WebRootPath was not found: C:\Users\user\ProductWebsite\wwwroot. Static files may be unavailable.
2025-02-02 23:42:39 [WRN] Overriding address(es) 'http://localhost:5000'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-02-02 23:42:39 [INF] Now listening on: https://127.0.0.1:49626
2025-02-02 23:42:39 [INF] Now listening on: http://localhost:5000
2025-02-02 23:42:39 [INF] Now listening on: https://localhost:7007
2025-02-02 23:42:39 [INF] Application started. Press Ctrl+C to shut down.
2025-02-02 23:42:39 [INF] Hosting environment: Development
2025-02-02 23:42:39 [INF] Content root path: C:\Users\user\ProductWebsite
2025-02-02 23:42:39 [INF] 正在監聽: https://127.0.0.1:49626
2025-02-02 23:42:39 [INF] 正在監聽: http://localhost:5000
2025-02-02 23:42:39 [INF] 正在監聽: https://localhost:7007
2025-02-02 23:46:54 [INF] Request starting HTTP/2 OPTIONS https://localhost:7007/api/users/forgot-password - null null
2025-02-02 23:46:54 [INF] CORS policy execution successful.
2025-02-02 23:46:54 [INF] Request finished HTTP/2 OPTIONS https://localhost:7007/api/users/forgot-password - 204 null null 49.3087ms
2025-02-02 23:46:54 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/forgot-password - application/json 31
2025-02-02 23:46:54 [INF] CORS policy execution successful.
2025-02-02 23:46:54 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite)'
2025-02-02 23:46:54 [INF] Route matched with {action = "ForgotPassword", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(ForgotPasswordDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 23:46:54 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:46:54 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 23:46:54 [INF] 收到忘記密碼請求: ljps40301@gmail.com
2025-02-02 23:46:55 [INF] Executed DbCommand (27ms) [Parameters=[@__model_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[Password], [u].[ResetPasswordToken], [u].[ResetPasswordTokenExpires], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__model_Email_0
2025-02-02 23:46:55 [INF] Executed DbCommand (10ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ResetPasswordToken] = @p0, [ResetPasswordTokenExpires] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-02-02 23:46:55 [INF] 重設密碼連結: https://localhost:8080/reset-password?token=68dc70ac-77bc-4f01-9bf0-5ad082efa162
2025-02-02 23:46:55 [ERR] 發送郵件失敗: Invalid Message-Id format. (Parameter 'value')
2025-02-02 23:47:07 [ERR] 發送郵件時發生錯誤: Invalid Message-Id format. (Parameter 'value')
2025-02-02 23:47:07 [ERR] 錯誤詳情:    at MimeKit.MimeMessage.set_MessageId(String value)
   at EmailService.SendEmailAsync(String to, String subject, String body) in C:\Users\user\ProductWebsite\Services\EmailService.cs:line 41
   at EmailService.SendEmailAsync(String to, String subject, String body) in C:\Users\user\ProductWebsite\Services\EmailService.cs:line 120
   at UserManagementAPI.Controllers.UsersController.ForgotPassword(ForgotPasswordDto model) in C:\Users\user\ProductWebsite\Controllers\UsersController.cs:line 406
2025-02-02 23:47:07 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-02 23:47:07 [INF] Executed action UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite) in 13176.4677ms
2025-02-02 23:47:07 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite)'
2025-02-02 23:47:07 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/forgot-password - 500 null application/json; charset=utf-8 13261.2825ms
2025-02-02 23:48:21 [INF] Application is shutting down...
2025-02-02 23:48:26 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:48:27 [INF] Executed DbCommand (145ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 23:48:27 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:48:27 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-02-02 23:48:27 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-02-02 23:48:27 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-02-02 23:48:27 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:48:27 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-02-02 23:48:27 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-02-02 23:48:27 [INF] No migrations were applied. The database is already up to date.
2025-02-02 23:48:27 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-02-02 23:48:27 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-02 23:48:27 [WRN] The WebRootPath was not found: C:\Users\user\ProductWebsite\wwwroot. Static files may be unavailable.
2025-02-02 23:48:27 [WRN] Overriding address(es) 'http://localhost:5000'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-02-02 23:48:27 [INF] Now listening on: https://127.0.0.1:49924
2025-02-02 23:48:27 [INF] Now listening on: http://localhost:5000
2025-02-02 23:48:27 [INF] Now listening on: https://localhost:7007
2025-02-02 23:48:27 [INF] Application started. Press Ctrl+C to shut down.
2025-02-02 23:48:27 [INF] Hosting environment: Development
2025-02-02 23:48:27 [INF] Content root path: C:\Users\user\ProductWebsite
2025-02-02 23:48:27 [INF] 正在監聽: https://127.0.0.1:49924
2025-02-02 23:48:27 [INF] 正在監聽: http://localhost:5000
2025-02-02 23:48:27 [INF] 正在監聽: https://localhost:7007
2025-02-02 23:48:39 [INF] Request starting HTTP/2 OPTIONS https://localhost:7007/api/users/forgot-password - null null
2025-02-02 23:48:39 [INF] CORS policy execution successful.
2025-02-02 23:48:39 [INF] Request finished HTTP/2 OPTIONS https://localhost:7007/api/users/forgot-password - 204 null null 32.9529ms
2025-02-02 23:48:39 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/forgot-password - application/json 31
2025-02-02 23:48:39 [INF] CORS policy execution successful.
2025-02-02 23:48:39 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite)'
2025-02-02 23:48:39 [INF] Route matched with {action = "ForgotPassword", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(ForgotPasswordDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 23:48:39 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:48:39 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 23:48:39 [INF] 收到忘記密碼請求: ljps40301@gmail.com
2025-02-02 23:48:39 [INF] Executed DbCommand (21ms) [Parameters=[@__model_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[Password], [u].[ResetPasswordToken], [u].[ResetPasswordTokenExpires], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__model_Email_0
2025-02-02 23:48:40 [INF] Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ResetPasswordToken] = @p0, [ResetPasswordTokenExpires] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-02-02 23:48:40 [INF] 重設密碼連結: https://localhost:8080/reset-password?token=f586858a-75dc-42c5-bc70-3fe08b1455c0
2025-02-02 23:48:40 [ERR] 發送郵件失敗: Invalid Message-Id format. (Parameter 'value')
2025-02-02 23:48:52 [ERR] 發送郵件時發生錯誤: Invalid Message-Id format. (Parameter 'value')
2025-02-02 23:48:52 [ERR] 錯誤詳情:    at MimeKit.MimeMessage.set_MessageId(String value)
   at EmailService.SendEmailAsync(String to, String subject, String body) in C:\Users\user\ProductWebsite\Services\EmailService.cs:line 41
   at EmailService.SendEmailAsync(String to, String subject, String body) in C:\Users\user\ProductWebsite\Services\EmailService.cs:line 122
   at UserManagementAPI.Controllers.UsersController.ForgotPassword(ForgotPasswordDto model) in C:\Users\user\ProductWebsite\Controllers\UsersController.cs:line 406
2025-02-02 23:48:52 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-02 23:48:52 [INF] Executed action UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite) in 12980.3385ms
2025-02-02 23:48:52 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite)'
2025-02-02 23:48:52 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/forgot-password - 500 null application/json; charset=utf-8 13072.3298ms
2025-02-02 23:50:10 [INF] Application is shutting down...
2025-02-02 23:50:16 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:50:16 [INF] Executed DbCommand (62ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 23:50:16 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:50:16 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-02-02 23:50:16 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-02-02 23:50:16 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-02-02 23:50:16 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:50:16 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-02-02 23:50:16 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-02-02 23:50:16 [INF] No migrations were applied. The database is already up to date.
2025-02-02 23:50:16 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-02-02 23:50:16 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-02 23:50:17 [WRN] The WebRootPath was not found: C:\Users\user\ProductWebsite\wwwroot. Static files may be unavailable.
2025-02-02 23:50:17 [WRN] Overriding address(es) 'http://localhost:5000'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-02-02 23:50:17 [INF] Now listening on: https://127.0.0.1:50104
2025-02-02 23:50:17 [INF] Now listening on: http://localhost:5000
2025-02-02 23:50:17 [INF] Now listening on: https://localhost:7007
2025-02-02 23:50:17 [INF] Application started. Press Ctrl+C to shut down.
2025-02-02 23:50:17 [INF] Hosting environment: Development
2025-02-02 23:50:17 [INF] Content root path: C:\Users\user\ProductWebsite
2025-02-02 23:50:17 [INF] 正在監聽: https://127.0.0.1:50104
2025-02-02 23:50:17 [INF] 正在監聽: http://localhost:5000
2025-02-02 23:50:17 [INF] 正在監聽: https://localhost:7007
2025-02-02 23:50:24 [INF] Request starting HTTP/2 OPTIONS https://localhost:7007/api/users/forgot-password - null null
2025-02-02 23:50:24 [INF] CORS policy execution successful.
2025-02-02 23:50:24 [INF] Request finished HTTP/2 OPTIONS https://localhost:7007/api/users/forgot-password - 204 null null 40.3174ms
2025-02-02 23:50:24 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/forgot-password - application/json 31
2025-02-02 23:50:24 [INF] CORS policy execution successful.
2025-02-02 23:50:24 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite)'
2025-02-02 23:50:24 [INF] Route matched with {action = "ForgotPassword", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(ForgotPasswordDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 23:50:24 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:50:24 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 23:50:24 [INF] 收到忘記密碼請求: ljps40301@gmail.com
2025-02-02 23:50:24 [INF] Executed DbCommand (22ms) [Parameters=[@__model_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[Password], [u].[ResetPasswordToken], [u].[ResetPasswordTokenExpires], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__model_Email_0
2025-02-02 23:50:25 [INF] Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ResetPasswordToken] = @p0, [ResetPasswordTokenExpires] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-02-02 23:50:25 [INF] 重設密碼連結: https://localhost:8080/reset-password?token=6f6e4c86-5570-4b1c-912d-fba44e2d39c6
2025-02-02 23:50:25 [ERR] 發送郵件失敗: Invalid Message-Id format. (Parameter 'value')
2025-02-02 23:50:37 [ERR] 發送郵件時發生錯誤: Invalid Message-Id format. (Parameter 'value')
2025-02-02 23:50:37 [ERR] 錯誤詳情:    at MimeKit.MimeMessage.set_MessageId(String value)
   at EmailService.SendEmailAsync(String to, String subject, String body) in C:\Users\user\ProductWebsite\Services\EmailService.cs:line 42
   at EmailService.SendEmailAsync(String to, String subject, String body) in C:\Users\user\ProductWebsite\Services\EmailService.cs:line 123
   at UserManagementAPI.Controllers.UsersController.ForgotPassword(ForgotPasswordDto model) in C:\Users\user\ProductWebsite\Controllers\UsersController.cs:line 406
2025-02-02 23:50:37 [INF] Executing ObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-02 23:50:37 [INF] Executed action UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite) in 13001.2703ms
2025-02-02 23:50:37 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite)'
2025-02-02 23:50:37 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/forgot-password - 500 null application/json; charset=utf-8 13082.3929ms
2025-02-02 23:53:04 [INF] Application is shutting down...
2025-02-02 23:53:10 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:53:10 [INF] Executed DbCommand (73ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 23:53:10 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:53:10 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-02-02 23:53:10 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-02-02 23:53:10 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-02-02 23:53:10 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:53:10 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-02-02 23:53:10 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-02-02 23:53:10 [INF] No migrations were applied. The database is already up to date.
2025-02-02 23:53:10 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-02-02 23:53:11 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-02 23:53:11 [WRN] The WebRootPath was not found: C:\Users\user\ProductWebsite\wwwroot. Static files may be unavailable.
2025-02-02 23:53:11 [WRN] Overriding address(es) 'http://localhost:5000'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-02-02 23:53:11 [INF] Now listening on: https://127.0.0.1:50270
2025-02-02 23:53:11 [INF] Now listening on: http://localhost:5000
2025-02-02 23:53:11 [INF] Now listening on: https://localhost:7007
2025-02-02 23:53:11 [INF] Application started. Press Ctrl+C to shut down.
2025-02-02 23:53:11 [INF] Hosting environment: Development
2025-02-02 23:53:11 [INF] Content root path: C:\Users\user\ProductWebsite
2025-02-02 23:53:11 [INF] 正在監聽: https://127.0.0.1:50270
2025-02-02 23:53:11 [INF] 正在監聽: http://localhost:5000
2025-02-02 23:53:11 [INF] 正在監聽: https://localhost:7007
2025-02-02 23:53:20 [INF] Request starting HTTP/2 OPTIONS https://localhost:7007/api/users/forgot-password - null null
2025-02-02 23:53:20 [INF] CORS policy execution successful.
2025-02-02 23:53:20 [INF] Request finished HTTP/2 OPTIONS https://localhost:7007/api/users/forgot-password - 204 null null 36.9687ms
2025-02-02 23:53:20 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/forgot-password - application/json 31
2025-02-02 23:53:20 [INF] CORS policy execution successful.
2025-02-02 23:53:20 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite)'
2025-02-02 23:53:20 [INF] Route matched with {action = "ForgotPassword", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(ForgotPasswordDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 23:53:20 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:53:20 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 23:53:21 [INF] 收到忘記密碼請求: ljps40301@gmail.com
2025-02-02 23:53:21 [INF] Executed DbCommand (22ms) [Parameters=[@__model_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[Password], [u].[ResetPasswordToken], [u].[ResetPasswordTokenExpires], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__model_Email_0
2025-02-02 23:53:21 [INF] Executed DbCommand (4ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ResetPasswordToken] = @p0, [ResetPasswordTokenExpires] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-02-02 23:53:21 [INF] 重設密碼連結: https://localhost:8080/reset-password?token=9c557d26-629c-4f88-a477-de3dd32000ee
2025-02-02 23:53:24 [INF] 郵件已成功發送至 ljps40301@gmail.com
2025-02-02 23:53:36 [INF] 重設密碼郵件已發送: ljps40301@gmail.com
2025-02-02 23:53:36 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-02 23:53:36 [INF] Executed action UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite) in 15379.3847ms
2025-02-02 23:53:36 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite)'
2025-02-02 23:53:36 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/forgot-password - 200 null application/json; charset=utf-8 15466.627ms
2025-02-02 23:55:29 [INF] Application is shutting down...
2025-02-02 23:55:35 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:55:35 [INF] Executed DbCommand (63ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 23:55:36 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:55:36 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-02-02 23:55:36 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-02-02 23:55:36 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-02-02 23:55:36 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:55:36 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-02-02 23:55:36 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-02-02 23:55:36 [INF] No migrations were applied. The database is already up to date.
2025-02-02 23:55:36 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-02-02 23:55:36 [INF] User profile is available. Using 'C:\Users\user\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-02-02 23:55:36 [WRN] The WebRootPath was not found: C:\Users\user\ProductWebsite\wwwroot. Static files may be unavailable.
2025-02-02 23:55:36 [WRN] Overriding address(es) 'http://localhost:5000'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead.
2025-02-02 23:55:36 [INF] Now listening on: https://127.0.0.1:50404
2025-02-02 23:55:36 [INF] Now listening on: http://localhost:5000
2025-02-02 23:55:36 [INF] Now listening on: https://localhost:7007
2025-02-02 23:55:36 [INF] Application started. Press Ctrl+C to shut down.
2025-02-02 23:55:36 [INF] Hosting environment: Development
2025-02-02 23:55:36 [INF] Content root path: C:\Users\user\ProductWebsite
2025-02-02 23:55:36 [INF] 正在監聽: https://127.0.0.1:50404
2025-02-02 23:55:36 [INF] 正在監聽: http://localhost:5000
2025-02-02 23:55:36 [INF] 正在監聽: https://localhost:7007
2025-02-02 23:55:48 [INF] Request starting HTTP/2 OPTIONS https://localhost:7007/api/users/forgot-password - null null
2025-02-02 23:55:49 [INF] CORS policy execution successful.
2025-02-02 23:55:49 [INF] Request finished HTTP/2 OPTIONS https://localhost:7007/api/users/forgot-password - 204 null null 33.9602ms
2025-02-02 23:55:49 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/forgot-password - application/json 31
2025-02-02 23:55:49 [INF] CORS policy execution successful.
2025-02-02 23:55:49 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite)'
2025-02-02 23:55:49 [INF] Route matched with {action = "ForgotPassword", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(ForgotPasswordDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 23:55:49 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:55:49 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 23:55:49 [INF] 收到忘記密碼請求: ljps40301@gmail.com
2025-02-02 23:55:49 [INF] Executed DbCommand (21ms) [Parameters=[@__model_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[Password], [u].[ResetPasswordToken], [u].[ResetPasswordTokenExpires], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__model_Email_0
2025-02-02 23:55:49 [INF] Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ResetPasswordToken] = @p0, [ResetPasswordTokenExpires] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-02-02 23:55:49 [INF] 重設密碼連結: https:///reset-password?token=9f260693-6f37-45ee-b9b5-8b8668ee74ab
2025-02-02 23:55:53 [INF] 郵件已成功發送至 ljps40301@gmail.com
2025-02-02 23:56:05 [INF] 重設密碼郵件已發送: ljps40301@gmail.com
2025-02-02 23:56:05 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-02 23:56:05 [INF] Executed action UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite) in 16251.3663ms
2025-02-02 23:56:05 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite)'
2025-02-02 23:56:05 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/forgot-password - 200 null application/json; charset=utf-8 16335.9558ms
2025-02-02 23:58:05 [INF] Request starting HTTP/2 OPTIONS https://localhost:7007/api/users/forgot-password - null null
2025-02-02 23:58:05 [INF] CORS policy execution successful.
2025-02-02 23:58:05 [INF] Request finished HTTP/2 OPTIONS https://localhost:7007/api/users/forgot-password - 204 null null 7.0744ms
2025-02-02 23:58:05 [INF] Request starting HTTP/2 POST https://localhost:7007/api/users/forgot-password - application/json 31
2025-02-02 23:58:05 [INF] CORS policy execution successful.
2025-02-02 23:58:05 [INF] Executing endpoint 'UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite)'
2025-02-02 23:58:05 [INF] Route matched with {action = "ForgotPassword", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ForgotPassword(ForgotPasswordDto) on controller UserManagementAPI.Controllers.UsersController (ProductWebsite).
2025-02-02 23:58:05 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-02-02 23:58:06 [INF] Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2025-02-02 23:58:06 [INF] 收到忘記密碼請求: ljps40301@gmail.com
2025-02-02 23:58:06 [INF] Executed DbCommand (2ms) [Parameters=[@__model_Email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[Email], [u].[Password], [u].[ResetPasswordToken], [u].[ResetPasswordTokenExpires], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Email] = @__model_Email_0
2025-02-02 23:58:06 [INF] Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 100), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [ResetPasswordToken] = @p0, [ResetPasswordTokenExpires] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2025-02-02 23:58:06 [INF] 重設密碼連結: https://localhost:8080/reset-password?token=4c17fb0c-5da0-47f0-a7ec-d1a1d9c46ec3
2025-02-02 23:58:08 [INF] 郵件已成功發送至 ljps40301@gmail.com
2025-02-02 23:58:20 [INF] 重設密碼郵件已發送: ljps40301@gmail.com
2025-02-02 23:58:20 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-02-02 23:58:20 [INF] Executed action UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite) in 14831.0659ms
2025-02-02 23:58:20 [INF] Executed endpoint 'UserManagementAPI.Controllers.UsersController.ForgotPassword (ProductWebsite)'
2025-02-02 23:58:20 [INF] Request finished HTTP/2 POST https://localhost:7007/api/users/forgot-password - 200 null application/json; charset=utf-8 14860.3536ms
